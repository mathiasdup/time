@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        *, *::before, *::after { cursor: none !important; }

        body {
            font-family: 'Cinzel', serif;
            background: url('background.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: white;
            overflow: hidden;
        }

        /* ── Curseur fantasy custom ── */
        .cursor-fantasy {
            position: fixed;
            pointer-events: none;
            z-index: 99999;
        }
        .cursor-fantasy-main {
            width: 40px;
            height: 40px;
            transform: translate(-3px, -3px) rotate(15deg);
            transform-origin: 3px 3px;
        }
        .cursor-fantasy-main svg {
            width: 100%;
            height: 100%;
        }
        .cursor-fantasy.clicking {
            transform: scale(0.95);
        }
        .cursor-trail {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,171,64,0.9) 0%, rgba(255,109,0,0) 70%);
            pointer-events: none;
            z-index: 99998;
            animation: trail-fade 0.35s ease-out forwards;
        }
        @keyframes trail-fade {
            to { opacity: 0; transform: scale(0.5); }
        }
        .click-effect {
            position: fixed;
            pointer-events: none;
            z-index: 99997;
            width: 30px;
            height: 30px;
            transform: translate(-50%, -50%);
        }
        .click-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(255,171,64,0.85);
            border-radius: 50%;
            animation: click-expand 0.35s ease-out forwards;
        }
        @keyframes click-expand {
            from { transform: scale(0.4); opacity: 1; }
            to { transform: scale(1.8); opacity: 0; }
        }
        
        .lobby { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; background: rgba(0,0,0,0.7); }
        .lobby.hidden { display: none; }
        .lobby-title { font-size: 3em; color: #ffd700; text-shadow: 0 0 30px rgba(255,215,0,0.5); margin-bottom: 30px; }
        .lobby-box { background: rgba(20,20,40,0.95); padding: 35px; border-radius: 15px; border: 3px solid #8b7355; text-align: center; min-width: 380px; }
        .lobby-btn { display: block; width: 100%; padding: 16px; margin: 12px 0; font-size: 1.1em; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s; font-family: 'Cinzel', serif; }
        .lobby-btn:hover { transform: scale(1.05); }
        .btn-create { background: linear-gradient(135deg, #8b4513, #cd853f); color: white; }
        .btn-join { background: linear-gradient(135deg, #2e4a2e, #4a7c4a); color: white; }
        .room-code-input { width: 100%; padding: 14px; font-size: 1.6em; text-align: center; border: 3px solid #8b7355; border-radius: 8px; background: rgba(0,0,0,0.5); color: #ffd700; margin: 12px 0; text-transform: uppercase; letter-spacing: 8px; }
        .room-code-display { font-size: 2.5em; color: #ffd700; letter-spacing: 10px; margin: 15px 0; padding: 15px; background: rgba(0,0,0,0.5); border-radius: 8px; }
        .waiting-text { color: #aaa; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .game-container { width: 100vw; height: 100vh; display: none; position: relative; }
        .game-container.active { display: block; }

        /* Card Zoom Overlay */
        .card-zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20000;
            cursor: pointer;
            animation: fadeIn 0.15s ease-out;
        }
        .card-zoom-overlay.hidden { display: none; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card-zoom-container {
            transform: scale(2.5);
            pointer-events: none;
        }
        .card-zoom-container .card {
            animation: zoomPop 0.2s ease-out;
        }
        @keyframes zoomPop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .top-bar { position: absolute; top: 10px; left: 0; right: 0; height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; background: transparent; z-index: 50; }
        .player-info-bar { display: flex; align-items: center; gap: 0; position: relative; }
        .player-info-bar.left { flex-direction: row; }
        .player-info-bar.right { flex-direction: row; }
        
        .rank-icon-container {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            flex-shrink: 0;
            position: relative;
        }
        /* Badge joueur : icône rang + nom attachés */
        .player-name-badge {
            display: flex;
            align-items: center;
            gap: 0;
        }
        .player-name-badge .rank-badge-wrapper {
            width: 70px;
            height: 80px;
            z-index: 2;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 26px;
        }
        .rank-badge {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            height: 100%;
        }
        .rank-gem {
            width: 54px;
            height: 54px;
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
        }
        .rank-gem svg {
            width: 100%;
            height: 100%;
        }
        .rank-tier-label {
            font-family: 'Cinzel', serif;
            font-size: 0.72em;
            font-weight: 900;
            letter-spacing: 1px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.7);
            margin-top: -2px;
            z-index: 1;
        }
        .player-name-badge .player-name-text {
            font-size: 1em;
            font-weight: bold;
            color: #fff;
            padding: 12px 20px;
            white-space: nowrap;
        }

        /* Joueur gauche : icône à gauche, dégradé vers la droite */
        .player-info-bar.left .player-name-badge .player-name-text {
            background: linear-gradient(to right, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%);
            margin-left: -30px;
            padding-left: 30px;
        }

        /* Joueur droite : icône à droite, dégradé vers la gauche */
        .player-info-bar.right .player-name-badge .player-name-text {
            background: linear-gradient(to left, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%);
            margin-right: -30px;
            padding-right: 30px;
        }
        
        .energy-display { 
            display: flex; 
            align-items: center; 
            gap: 8px;
            margin-left: 12px;
        }
        .player-info-bar.right .energy-display {
            margin-left: 0;
            margin-right: 12px;
        }
        /* ==================== BOUTONS CÔTÉ DROIT ==================== */
        .buttons-right {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 100;
        }

        .half-button {
            width: 50px;
            height: 80px;
            border-radius: 40px 0 0 40px;
            padding: 4px;
            padding-right: 0;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow:
                -4px 4px 15px rgba(0, 0, 0, 0.5),
                0 2px 5px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }

        .half-button:hover {
            transform: translateX(-5px);
        }

        .half-button.active {
            transform: translateX(-5px);
        }

        .half-button.bronze {
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
        }

        .half-button-inner {
            width: 100%;
            height: 100%;
            border-radius: 36px 0 0 36px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(10, 10, 10, 0.9) 50%, rgba(21, 21, 21, 0.9) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .half-button-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 0;
            height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
            border-radius: 36px 0 0 0;
            pointer-events: none;
        }

        .half-button .icon {
            width: 28px;
            height: 28px;
            fill: #c4b896;
            opacity: 0.9;
            transition: opacity 0.3s ease, fill 0.3s ease;
        }

        .half-button:hover .icon,
        .half-button.active .icon {
            opacity: 1;
            fill: #e0d4b8;
        }

        .half-button:hover .icon-settings,
        .half-button.active .icon-settings {
            animation: rotateSettings 2s linear infinite;
        }

        @keyframes rotateSettings {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ==================== PANNEAUX ==================== */
        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 40;
        }

        .panel-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .panel {
            position: fixed;
            top: 50%;
            right: -400px;
            transform: translateY(-50%);
            width: 380px;
            height: 500px;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
        }

        .panel.open {
            right: 60px;
        }

        .panel-border {
            width: 100%;
            height: 100%;
            border-radius: 20px;
            padding: 4px;
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.6),
                0 4px 16px rgba(0, 0, 0, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }

        .panel-inner {
            width: 100%;
            height: 100%;
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.95) 0%, rgba(10, 10, 10, 0.95) 50%, rgba(21, 21, 21, 0.95) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 30%;
            background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }

        .panel-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(196, 184, 150, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .panel-header .icon {
            width: 24px;
            height: 24px;
            fill: #c4b896;
        }

        .panel-title {
            font-family: 'Cinzel', serif;
            font-size: 17px;
            font-weight: 700;
            color: #c4b896;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .panel-close {
            margin-left: auto;
            width: 30px;
            height: 30px;
            border: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.3s ease;
        }

        .panel-close:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .panel-close .icon {
            width: 16px;
            height: 16px;
            fill: #c4b896;
        }

        .panel-content {
            flex: 1;
            padding: 20px 25px;
            overflow-y: auto;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
        }

        .panel-content::-webkit-scrollbar {
            width: 6px;
        }

        .panel-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 3px;
        }

        .panel-content::-webkit-scrollbar-thumb {
            background: rgba(196, 184, 150, 0.3);
            border-radius: 3px;
        }

        .panel-content::-webkit-scrollbar-thumb:hover {
            background: rgba(196, 184, 150, 0.5);
        }

        /* ==================== JOURNAL DE BATAILLE ==================== */
        .battle-log-entry {
            padding: 15px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid #c4b896;
        }

        .battle-log-entry .time {
            font-size: 11px;
            color: rgba(196, 184, 150, 0.6);
            margin-bottom: 5px;
        }

        .battle-log-entry .message {
            color: rgba(255, 255, 255, 0.85);
        }

        .battle-log-entry.damage {
            border-left-color: #ba3d43;
        }

        .battle-log-entry.heal {
            border-left-color: #427253;
        }

        .battle-log-entry.mana {
            border-left-color: #6493e9;
        }

        /* ==================== SETTINGS ==================== */
        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            font-family: 'Cinzel', serif;
            font-size: 12px;
            color: #c4b896;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .setting-name {
            color: rgba(255, 255, 255, 0.85);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .setting-slider {
            width: 100px;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 3px;
            outline: none;
        }

        .setting-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #c4b896 0%, #a08060 100%);
            border-radius: 50%;
            cursor: pointer;
        }

        .slider-value {
            color: #c4b896;
            font-size: 14px;
            min-width: 40px;
            text-align: right;
        }

        .surrender-pill {
            width: 100%;
            height: 60px;
            border-radius: 30px;
            padding: 4px;
            background: linear-gradient(135deg,
                #8a2d32 0%,
                #d86a6f 15%,
                #ba3d43 30%,
                #7a2428 50%,
                #ba3d43 70%,
                #e87a7f 85%,
                #8a2d32 100%
            );
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.5),
                0 2px 5px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .surrender-pill:hover {
            transform: translateY(-2px);
            box-shadow:
                0 6px 20px rgba(0, 0, 0, 0.6),
                0 3px 8px rgba(0, 0, 0, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.3);
        }

        .surrender-pill:active {
            transform: translateY(1px);
        }

        .surrender-pill-inner {
            width: 100%;
            height: 100%;
            border-radius: 26px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(10, 10, 10, 0.9) 50%, rgba(21, 21, 21, 0.9) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .surrender-pill-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 15%;
            height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
            border-radius: 26px;
            pointer-events: none;
        }

        .surrender-text {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            font-weight: 700;
            color: #d86a6f;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow:
                0 0 15px rgba(186, 61, 67, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }

        .surrender-pill:hover .surrender-text {
            color: #e87a7f;
            text-shadow:
                0 0 20px rgba(232, 122, 127, 0.6),
                0 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .header-center { position: absolute; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; }
        .mana-orb {
            min-width: 50px;
            height: 50px;
            width: 50px;
            padding: 0;
            background: radial-gradient(circle at 30% 30%, #4fc3f7, #0277bd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #fff;
            border-radius: 50%;
            border: 3px solid #81d4fa;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
        }
        
        /* Bouton Fin de Tour - Style pilule métallique */
        .end-turn-btn {
            width: 180px;
            height: 50px;
            border-radius: 25px;
            padding: 4px;
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.5),
                0 2px 5px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
        }
        .end-turn-inner {
            width: 100%;
            height: 100%;
            border-radius: 21px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(10, 10, 10, 0.9) 50%, rgba(21, 21, 21, 0.9) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .end-turn-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 15%;
            height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
            border-radius: 21px;
            pointer-events: none;
        }
        .end-turn-text {
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #d9d0b4;
            text-shadow:
                0 0 15px rgba(196, 184, 150, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .end-turn-timer {
            display: none;
            font-family: 'Cinzel', serif;
            font-size: 1.4em;
            font-weight: 900;
            color: #d9d0b4;
            text-shadow:
                0 0 15px rgba(196, 184, 150, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
        }

        .end-turn-phase {
            display: none;
            font-family: 'Cinzel', serif;
            font-size: 0.9em;
            font-weight: 700;
            color: #d9d0b4;
            text-shadow:
                0 0 15px rgba(196, 184, 150, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .end-turn-hourglass {
            display: none;
            width: 28px;
            height: 28px;
            fill: #666;
            z-index: 2;
        }

        /* Hover - soulèvement léger */
        .end-turn-btn:hover:not(.waiting) {
            transform: translateY(-3px);
            box-shadow:
                0 8px 20px rgba(0, 0, 0, 0.6),
                0 4px 8px rgba(0, 0, 0, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }

        /* Active */
        .end-turn-btn:active:not(.waiting) {
            transform: translateY(2px);
            box-shadow:
                0 2px 8px rgba(0, 0, 0, 0.5),
                inset 0 1px 2px rgba(255, 255, 255, 0.1);
        }

        /* Waiting / Resolving / Phase - désactivé */
        .end-turn-btn.waiting,
        .end-turn-btn.resolving,
        .end-turn-btn.has-phase {
            pointer-events: none;
            cursor: default;
        }
        /* Resolving - grisé, affiche le texte de phase */
        .end-turn-btn.resolving {
            background: linear-gradient(135deg,
                #6a6a6a 0%,
                #9a9a9a 15%,
                #808080 30%,
                #5a5a5a 50%,
                #808080 70%,
                #a0a0a0 85%,
                #6a6a6a 100%
            );
        }
        .end-turn-btn.waiting {
            background: linear-gradient(135deg,
                #6a6a6a 0%,
                #9a9a9a 15%,
                #808080 30%,
                #5a5a5a 50%,
                #808080 70%,
                #a0a0a0 85%,
                #6a6a6a 100%
            );
        }
        .end-turn-btn.waiting .end-turn-text,
        .end-turn-btn.waiting .end-turn-timer,
        .end-turn-btn.waiting .end-turn-phase {
            display: none;
        }
        .end-turn-btn.waiting .end-turn-hourglass {
            display: block;
            animation: hourglassSpin 3s ease-in-out infinite;
        }

        @keyframes hourglassSpin {
            0% { transform: rotate(0deg); }
            15% { transform: rotate(180deg); }
            100% { transform: rotate(180deg); }
        }

        /* Timer actif - masque le texte, affiche le timer */
        .end-turn-btn.has-timer .end-turn-text {
            display: none;
        }
        .end-turn-btn.has-timer .end-turn-timer {
            display: block;
        }
        .end-turn-btn.has-timer .end-turn-phase {
            display: none;
        }

        /* Phase active - masque le texte et timer, affiche la phase */
        .end-turn-btn.has-phase .end-turn-text {
            display: none;
        }
        .end-turn-btn.has-phase .end-turn-timer {
            display: none;
        }
        .end-turn-btn.has-phase .end-turn-phase {
            display: block;
        }
        
        /* Ancien indicateur de phase masqué - remplacé par affichage dans le bouton fin de tour */
        .phase-indicator {
            display: none !important;
        }
        .phase-indicator.visible {
            display: none !important;
        }
        .phase-indicator.fade-out { display: none !important; }

        @keyframes phasePopIn {
            from { opacity: 0; transform: translateY(20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Styles par type de phase */
        .phase-indicator.planning {
            border-color: #3498db;
            background: linear-gradient(135deg, rgba(52,152,219,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.revelation {
            border-color: #9b59b6;
            background: linear-gradient(135deg, rgba(155,89,182,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.attack {
            border-color: #e74c3c;
            background: linear-gradient(135deg, rgba(231,76,60,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.protection {
            border-color: #2ecc71;
            background: linear-gradient(135deg, rgba(46,204,113,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.combat {
            border-color: #e67e22;
            background: linear-gradient(135deg, rgba(230,126,34,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.draw {
            border-color: #1abc9c;
            background: linear-gradient(135deg, rgba(26,188,156,0.3), rgba(30,30,50,0.95));
        }
        .phase-indicator.endturn {
            border-color: #f39c12;
            background: linear-gradient(135deg, rgba(243,156,18,0.3), rgba(30,30,50,0.95));
        }
        
        .side-panel { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 12px;
            transform: translateZ(1px);
        }
        .side-panel.left { 
            margin-right: 25px;
        }
        .side-panel.right { 
            margin-left: 25px;
        }
        
        .hero-card {
            width: 130px;
            height: 175px;
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            transition: all 0.3s;
        }
        .hero-card.hero-targetable {
            border-color: #62d7ff !important;
            box-shadow: 0 0 15px rgba(98,215,255,0.5);
            animation: validPulse 1s infinite;
        }
        .hero-card.hero-drag-over {
            border-color: #f1c40f !important;
            background: rgba(241,196,15,0.2) !important;
            box-shadow: 0 0 20px rgba(241,196,15,0.6);
        }
        .hero-card-inner {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            background-size: cover;
            background-position: center;
            position: relative;
            pointer-events: none;
        }
        .hero-card.hit { animation: heroHit 0.5s ease-out; }
        @keyframes heroHit { 0%, 100% { box-shadow: none; } 50% { box-shadow: 0 0 30px rgba(255,0,0,0.8), inset 0 0 20px rgba(255,0,0,0.3); } }
        .card-slot.hit { animation: slotHit 0.5s ease-out; }
        @keyframes slotHit { 0%, 100% { transform: translateX(0); box-shadow: none; } 20% { transform: translateX(-4px); } 40% { transform: translateX(4px); box-shadow: 0 0 20px rgba(255,80,0,0.7); } 60% { transform: translateX(-3px); } 80% { transform: translateX(2px); } }

        /* ATK Boost Animation (Salamandre de braise) */
        .atk-boost-aura {
            position: absolute;
            inset: 0;
            border-radius: 8px;
            pointer-events: none;
            animation: atkBoostAura 0.9s ease-out forwards;
        }
        @keyframes atkBoostAura {
            0% { box-shadow: 0 0 0 rgba(255, 120, 20, 0); opacity: 0; }
            10% { box-shadow: 0 0 25px rgba(255, 120, 20, 0.9), 0 0 50px rgba(255, 60, 0, 0.5), inset 0 0 20px rgba(255, 100, 0, 0.4); opacity: 1; }
            35% { box-shadow: 0 0 35px rgba(255, 140, 40, 1), 0 0 70px rgba(255, 80, 0, 0.6), inset 0 0 25px rgba(255, 120, 20, 0.5); opacity: 1; }
            70% { box-shadow: 0 0 20px rgba(255, 140, 40, 0.6), 0 0 40px rgba(255, 80, 0, 0.3), inset 0 0 10px rgba(255, 120, 20, 0.2); opacity: 0.8; }
            100% { box-shadow: 0 0 0 rgba(255, 120, 20, 0); opacity: 0; }
        }
        .atk-boost-particle {
            position: absolute;
            bottom: 30%;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffe066, #ff8800);
            box-shadow: 0 0 6px rgba(255, 180, 0, 0.8);
            pointer-events: none;
            animation: atkBoostParticle 0.8s ease-out forwards;
        }
        @keyframes atkBoostParticle {
            0% { opacity: 1; transform: translateY(0) scale(0.8); }
            40% { opacity: 1; transform: translateY(-20px) scale(1.2); }
            100% { opacity: 0; transform: translateY(-55px) scale(0.2); }
        }
        .atk-boost-label {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.3);
            font-size: 1.3em;
            font-weight: 900;
            color: #ffdd44;
            text-shadow: 0 0 12px rgba(255, 100, 0, 1), 0 0 25px rgba(255, 60, 0, 0.7), 0 2px 4px rgba(0,0,0,0.9);
            pointer-events: none;
            opacity: 0;
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
            letter-spacing: 1px;
        }
        .atk-boost-label.active {
            opacity: 1;
            transform: translate(-50%, -60%) scale(1.1);
        }

        .hero-title {
            display: none; /* Caché sur le terrain, visible uniquement en hover/preview */
        }
        /* HP Héros - Style pilule métallique */
        .hero-hp {
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 36px;
            border-radius: 18px;
            padding: 3px;
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.5),
                0 2px 5px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
            z-index: 10;
            pointer-events: none;
        }
        .hero-hp-inner {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(10, 10, 10, 0.9) 50%, rgba(21, 21, 21, 0.9) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .hero-hp-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 15%;
            height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
            border-radius: 15px;
            pointer-events: none;
        }
        .hero-hp-number {
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #ffffff;
            text-shadow:
                0 0 15px rgba(196, 184, 150, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
        }
        /* Mana héros - Style cercle métallique bleu avec intérieur transparent */
        .hero-mana {
            position: absolute;
            top: -22px;
            left: -20px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #97dcd96b;
            z-index: 5;
            pointer-events: none;
        }
        /* Bordure dégradée métallique */
        .hero-mana::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            padding: 2.5px;
            background: linear-gradient(135deg, #79c9ff 0%, #aad3f1 15%, #95cffd 30%, #5face7 50%, #6bafe4 70%, #93cbed 85%, #76b8eb 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.5),
                0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .hero-mana-inner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        .hero-mana-number {
            font-family: 'Cinzel', serif;
            font-size: 1.3em;
            font-weight: 900;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(123, 184, 232, 0.4), 0 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 2;
        }
        /* Mana héros adverse - miroir à droite */
        .side-panel.right .hero-mana {
            left: auto;
            right: -20px;
        }

        .deck-grave-row {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .deck-box {
            width: 105px;
            height: 140px;
            font-size: 0.75em;
            background: transparent;
            border: none;
            padding: 0;
            cursor: pointer;
            position: relative;
        }
        .deck-stack {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 105px;
            height: 140px;
        }
        /* Tooltip du deck */
        .deck-tooltip, .grave-tooltip {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 100;
            backdrop-filter: blur(4px);
        }
        .deck-tooltip {
            top: 100%;
            margin-top: 8px;
        }
        .grave-tooltip {
            top: 100%;
            margin-top: 8px;
        }
        .deck-box:hover .deck-tooltip,
        .grave-box:hover .grave-tooltip {
            opacity: 1;
        }
        /* Cartes empilées style Magic Arena */
        .deck-card-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('back1.png') center/cover no-repeat;
            border-radius: 6px;
        }
        /* Couches empilées vers la droite pour le joueur */
        .side-panel.left .deck-card-layer:nth-child(1) { transform: translate(0px, 0px); z-index: 5; }
        .side-panel.left .deck-card-layer:nth-child(2) { transform: translate(3px, 1px); z-index: 4; }
        .side-panel.left .deck-card-layer:nth-child(3) { transform: translate(6px, 2px); z-index: 3; }
        .side-panel.left .deck-card-layer:nth-child(4) { transform: translate(9px, 3px); z-index: 2; }
        .side-panel.left .deck-card-layer:nth-child(5) { transform: translate(12px, 4px); z-index: 1; }

        /* Couches empilées vers la gauche pour l'adversaire (miroir) */
        .side-panel.right .deck-card-layer:nth-child(1) { transform: translate(0px, 0px); z-index: 5; }
        .side-panel.right .deck-card-layer:nth-child(2) { transform: translate(-3px, 1px); z-index: 4; }
        .side-panel.right .deck-card-layer:nth-child(3) { transform: translate(-6px, 2px); z-index: 3; }
        .side-panel.right .deck-card-layer:nth-child(4) { transform: translate(-9px, 3px); z-index: 2; }
        .side-panel.right .deck-card-layer:nth-child(5) { transform: translate(-12px, 4px); z-index: 1; }

        .deck-card-top {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('back1.png') center/cover no-repeat;
            border-radius: 6px;
            z-index: 10;
        }

        /* Deck vide */
        .deck-stack.empty .deck-card-layer { display: none; }
        .deck-stack.empty .deck-card-top {
            background: rgba(255,255,255,0.05);
            border: 2px dashed rgba(255,255,255,0.2);
            border-radius: 6px;
        }
        
        /* Cimetière avec pile de cartes */
        .grave-box {
            width: 105px;
            height: 140px;
            font-size: 0.75em;
            background: transparent;
            border: none;
            position: relative;
            cursor: pointer;
            padding: 0;
        }
        .grave-stack {
            position: absolute;
            top: 3px;
            left: 50%;
            transform: translateX(-50%);
            width: 105px;
            height: 140px;
        }
        /* Cartes empilées du cimetière — vraies cartes */
        .grave-card-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 6px;
            display: none;
            overflow: hidden;
        }
        .grave-card-layer .card {
            width: 100% !important;
            height: 100% !important;
            margin: 0 !important;
        }
        /* Couches empilées vers la droite pour le joueur */
        .side-panel.left .grave-card-layer:nth-child(1) { transform: translate(8px, 3px); z-index: 1; }
        .side-panel.left .grave-card-layer:nth-child(2) { transform: translate(5px, 2px); z-index: 2; }
        .side-panel.left .grave-card-layer:nth-child(3) { transform: translate(2px, 1px); z-index: 3; }

        /* Couches empilées vers la gauche pour l'adversaire (miroir) */
        .side-panel.right .grave-card-layer:nth-child(1) { transform: translate(-8px, 3px); z-index: 1; }
        .side-panel.right .grave-card-layer:nth-child(2) { transform: translate(-5px, 2px); z-index: 2; }
        .side-panel.right .grave-card-layer:nth-child(3) { transform: translate(-2px, 1px); z-index: 3; }

        /* Afficher les couches selon le nombre de cartes (1 carte = 0 layers, 2 = 1, 3 = 2, 4+ = 3) */
        .grave-stack.has-cards .grave-card-layer { display: block; }
        .grave-stack.cards-1 .grave-card-layer { display: none; }
        .grave-stack.cards-2 .grave-card-layer:nth-child(1),
        .grave-stack.cards-2 .grave-card-layer:nth-child(2) { display: none; }
        .grave-stack.cards-3 .grave-card-layer:nth-child(1) { display: none; }
        
        .card.in-graveyard .arena-stats {
            display: none;
        }

        .grave-top-card {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            background: linear-gradient(135deg, rgba(50,50,70,0.95), rgba(30,30,50,0.95));
            border: 2px solid rgba(255,255,255,0.3);
            z-index: 5;
        }
        .grave-top-card:not(.empty) {
            background: transparent;
            border: none;
        }
        .grave-top-card:not(.empty) .card {
            width: 100% !important;
            height: 100% !important;
            margin: 0 !important;
        }
        .grave-top-card.empty {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            transition: border-color 0.2s, background 0.2s;
        }
        .grave-top-card.empty:hover {
            border-color: rgba(255,255,255,0.7);
            background: rgba(255,255,255,0.15);
        }
        .grave-top-card.empty::after {
            content: '';
            width: 40px;
            height: 40px;
            background: url('death.png') center/contain no-repeat;
            opacity: 0.3;
            filter: brightness(0) invert(1);
        }
        .grave-top-card .mini-card {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 8px 5px;
            box-sizing: border-box;
        }
        .grave-top-card .mini-card .card-icon {
            font-size: 2em;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .grave-top-card .mini-card .card-name {
            font-size: 0.55em;
            text-align: center;
            color: #ffd700;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        .grave-top-card .mini-card .card-stats {
            font-size: 0.6em;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .grave-top-card .mini-card .card-stats .atk { color: #f39c12; }
        .grave-top-card .mini-card .card-stats .hp { color: #e74c3c; }

        .game-board-wrapper {
            position: absolute;
            top: 46%;
            left: 50%;
            transform: translate(-50%, -50%);
            perspective: 1500px;
            padding-bottom: 50px;
        }
        
        .game-board {
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotateX(18deg);
            transform-style: preserve-3d;
        }
        
        .battlefield { 
            display: flex; 
            gap: 12px; 
            padding: 25px 35px; 
            background: rgba(0,0,0,0.5); 
            border-radius: 12px; 
            border: 2px solid rgba(100,80,60,0.6);
            box-shadow: 0 20px 60px rgba(0,0,0,0.6), inset 0 0 30px rgba(0,0,0,0.3);
            transform: translateZ(1px);
        }
        
        .field-side { 
            display: grid; 
            grid-template-columns: repeat(2, 105px); 
            grid-template-rows: repeat(4, 140px); 
            gap: 8px;
            transform: translateZ(1px);
        }
        
        .trap-center { display: flex; gap: 8px; transform: translateZ(1px); }
        .trap-col { display: grid; grid-template-rows: repeat(4, 140px); gap: 8px; }
        
        .card-slot { 
            width: 105px; 
            height: 140px; 
            border: 2px solid rgba(255,255,255,0.3); 
            border-radius: 4px; 
            background: rgba(255,255,255,0.05); 
            cursor: pointer; 
            transition: all 0.2s; 
            position: relative; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        /* Losange intérieur */
        .card-slot::before {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255,255,255,0.25);
            background: transparent;
            transform: rotate(45deg);
            pointer-events: none;
        }
        .card-slot .slot-label { position: absolute; font-size: 0.65em; color: rgba(255,255,255,0.25); pointer-events: none; z-index: 1; }
        .card-slot:not(.has-card):hover { border-color: rgba(255,255,255,0.7); background: rgba(255,255,255,0.15); }
        .card-slot:not(.has-card):hover::before { border-color: rgba(255,255,255,0.5); }
        .card-slot.me-slot { border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.05); }
        .card-slot.opp-slot { border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.05); }
        .card-slot.has-card {
            padding: 0;
        }
        .card-slot.has-card::before { display: none; }
        .card-slot.has-card .card {
            width: 105px;
            height: 140px;
            cursor: default;
            transition: none;
        }
        .card-slot.valid-target { border-color: #62d7ff !important; background: rgba(98,215,255,0.25) !important; box-shadow: 0 0 15px rgba(98,215,255,0.5); animation: validPulse 1s infinite; }
        .card-slot.drag-over { border-color: #f1c40f !important; background: rgba(241,196,15,0.35) !important; box-shadow: 0 0 25px rgba(241,196,15,0.8); }
        .card-slot.cross-target { border-color: #f39c12 !important; background: rgba(243,156,18,0.3) !important; box-shadow: 0 0 15px rgba(243,156,18,0.6); animation: crossPulse 1s infinite; }
        @keyframes crossPulse { 0%,100% { box-shadow: 0 0 10px rgba(243,156,18,0.4); } 50% { box-shadow: 0 0 25px rgba(243,156,18,0.8); } }
        .card-slot.moveable { border-color: #3498db !important; background: rgba(52,152,219,0.25) !important; box-shadow: 0 0 15px rgba(52,152,219,0.5); }
        @keyframes validPulse { 0%,100% { box-shadow: 0 0 10px rgba(98,215,255,0.4); } 50% { box-shadow: 0 0 25px rgba(98,215,255,0.8); } }
        
        .trap-slot { 
            width: 55px; 
            height: 55px; 
            margin: auto 0; 
            border: 2px solid rgba(255,255,255,0.25); 
            border-radius: 50%; 
            background: rgba(255,255,255,0.05); 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            transition: all 0.2s; 
            font-size: 0.6em; 
            color: rgba(255,255,255,0.4);
            position: relative;
            overflow: visible;
        }
        /* Icône piège à ours */
        .trap-slot::before {
            content: '';
            width: 28px;
            height: 28px;
            background-image: url('beartrap.png');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            opacity: 0.35;
            filter: brightness(0) invert(1);
        }
        /* Miroir pour les pièges adverses (colonne de droite) */
        .trap-col:last-child .trap-slot::before {
            transform: scaleX(-1);
        }
        .trap-slot.has-trap::before {
            display: none;
        }
        .trap-slot:hover { border-color: rgba(255,255,255,0.6); background: rgba(255,255,255,0.15); }
        .trap-slot.has-trap { border-style: solid; background: rgba(231,76,60,0.3); border-color: #e74c3c; display: flex; align-items: center; justify-content: center; }
        .trap-slot.has-trap.mine { background: rgba(46,204,113,0.3); border-color: #27ae60; }
        .trap-icon-img {
            width: 42px;
            pointer-events: none;
        }
        .trap-icon-img.mine {
            filter: brightness(0) saturate(100%) invert(62%) sepia(60%) saturate(500%) hue-rotate(90deg) brightness(95%);
        }
        .trap-icon-img.enemy {
            filter: brightness(0) saturate(100%) invert(30%) sepia(90%) saturate(2000%) hue-rotate(340deg) brightness(90%);
        }
        .trap-slot.valid-target { border-color: #62d7ff !important; background: rgba(98,215,255,0.3) !important; }
        .trap-slot.drag-over { border-color: #f1c40f !important; background: rgba(241,196,15,0.4) !important; }
        .trap-slot.triggered { animation: trapExplode 0.6s ease-out; }
        @keyframes trapExplode { 0% { transform: scale(1); } 50% { transform: scale(1.8); background: rgba(255,100,0,0.8); } 100% { transform: scale(0); opacity: 0; } }

        /* Aura de révélation de piège — style Hearthstone/Arena */
        .trap-reveal-aura {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 100%; height: 100%;
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
        }
        .trap-reveal-ring {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 4;
            border: 2px solid rgba(255, 170, 50, 0.9);
            animation: trapRevealRingExpand 700ms ease-out forwards;
        }
        @keyframes trapRevealRingExpand {
            0% { width: 30px; height: 30px; opacity: 1; border-width: 3px; }
            60% { opacity: 0.8; border-width: 2px; }
            100% { width: 120px; height: 120px; opacity: 0; border-width: 1px; }
        }
        .trap-reveal-flash {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 60px; height: 60px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 6;
            background: radial-gradient(circle, rgba(255,200,50,0.9) 0%, rgba(255,150,30,0.5) 40%, transparent 70%);
            animation: trapRevealFlash 500ms ease-out forwards;
        }
        @keyframes trapRevealFlash {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            20% { opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(2.0); opacity: 0; }
        }
        .trap-slot.revealing {
            animation: trapSlotRevealGlow 800ms ease-out;
            z-index: 3;
        }
        @keyframes trapSlotRevealGlow {
            0% { box-shadow: 0 0 5px rgba(255,170,50,0.3); border-color: rgba(255,170,50,0.5); }
            30% { box-shadow: 0 0 25px rgba(255,170,50,0.9), 0 0 50px rgba(255,120,20,0.4); border-color: rgba(255,200,50,1); }
            60% { box-shadow: 0 0 15px rgba(255,170,50,0.6), 0 0 35px rgba(255,120,20,0.2); border-color: rgba(255,170,50,0.8); }
            100% { box-shadow: none; border-color: rgba(255,255,255,0.25); }
        }

        /* Effet d'invocation pour ses propres créatures */
        .summon-ring {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
            border: 2px solid rgba(98, 215, 255, 0.9);
            animation: summonRingExpand 700ms ease-out forwards;
        }
        @keyframes summonRingExpand {
            0% { width: 20px; height: 20px; opacity: 1; border-width: 3px; }
            60% { opacity: 0.8; border-width: 2px; }
            100% { width: 140px; height: 140px; opacity: 0; border-width: 1px; }
        }
        .summon-flash {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 60px; height: 60px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 16;
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(98,215,255,0.5) 40%, transparent 70%);
            animation: summonFlash 500ms ease-out forwards;
        }
        @keyframes summonFlash {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            20% { opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(2.0); opacity: 0; }
        }
        .card-slot.summoning {
            animation: summonSlotGlow 800ms ease-out;
            z-index: 14;
        }
        @keyframes summonSlotGlow {
            0% { box-shadow: 0 0 5px rgba(98,215,255,0.3); border-color: rgba(98,215,255,0.5); }
            30% { box-shadow: 0 0 25px rgba(98,215,255,0.9), 0 0 50px rgba(50,150,255,0.4); border-color: rgba(130,220,255,1); }
            60% { box-shadow: 0 0 15px rgba(98,215,255,0.6), 0 0 35px rgba(50,150,255,0.2); border-color: rgba(98,215,255,0.8); }
            100% { box-shadow: none; border-color: rgba(255,255,255,0.25); }
        }

        /* Effet coup de vent pour déplacement de ses propres créatures */
        .wind-gust {
            position: absolute;
            inset: -15px;
            overflow: hidden;
            transform-origin: center center;
        }
        .wind-streak {
            position: absolute;
            height: 2px;
            left: -60%;
            background: linear-gradient(90deg, transparent 0%, rgba(200,235,255,0.5) 15%, rgba(255,255,255,0.9) 45%, rgba(255,255,255,0.9) 55%, rgba(200,235,255,0.5) 85%, transparent 100%);
            border-radius: 1px;
            opacity: 0;
            animation: windSweep 380ms ease-out forwards;
            filter: blur(0.5px);
        }
        @keyframes windSweep {
            0% { left: -60%; opacity: 0; }
            10% { opacity: 0.85; }
            100% { left: 120%; opacity: 0; }
        }
        .wind-flash {
            position: absolute;
            inset: 0;
            border-radius: 6px;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.25) 0%, transparent 70%);
            opacity: 0;
            animation: windFlash 400ms ease-out forwards;
        }
        @keyframes windFlash {
            0% { opacity: 0; }
            15% { opacity: 1; }
            100% { opacity: 0; }
        }

        .card {
            width: 100px; 
            height: 135px; 
            border-radius: 6px; 
            position: relative; 
            cursor: grab; 
            overflow: hidden; 
            transition: transform 0.3s, box-shadow 0.2s; 
            background: linear-gradient(180deg, #2a2a3a 0%, #1a1a25 100%); 
            flex-shrink: 0; 
            border: 2px solid rgba(200,180,140,0.6);
            box-shadow: 0 4px 12px rgba(0,0,0,0.5), 0 2px 4px rgba(0,0,0,0.3);
        }
        .card.dragging { cursor: grabbing; }

        /* === Custom Drag Ghost === */
        .drag-ghost-container {
            contain: layout style;
            will-change: transform;
        }
        .drag-ghost-container.lifting {
            transition: transform 180ms cubic-bezier(0.34, 1.2, 0.64, 1);
        }
        .drag-ghost-container.snapping {
            transition: transform 200ms cubic-bezier(0.2, 0, 0, 1),
                        opacity 150ms ease-out;
        }
        .drag-ghost-container.returning {
            transition: transform 250ms cubic-bezier(0.2, 0, 0, 1),
                        opacity 200ms ease-in;
        }
        .drag-ghost-card,
        .drag-ghost-card.card.arena-style[class*="faction-"] {
            border: 2px solid #e67e22 !important;
            border-radius: 4px !important;
            box-shadow: 0 0 8px rgba(230, 126, 34, 0.5), 0 20px 40px rgba(0,0,0,0.5);
            width: 100px !important;
            height: 135px !important;
            margin: 0 !important;
            cursor: grabbing;
            animation: dragGhostGlow 1.5s ease-in-out infinite !important;
            transform-origin: top left;
            transform: scale(1.3);
        }
        @keyframes dragGhostGlow {
            0%, 100% { box-shadow: 0 0 6px rgba(230, 126, 34, 0.4), 0 20px 40px rgba(0,0,0,0.5); border-color: #e67e22; }
            50% { box-shadow: 0 0 16px rgba(230, 126, 34, 0.9), 0 20px 40px rgba(0,0,0,0.5); border-color: #f0a060; }
        }
        .card.custom-dragging {
            visibility: hidden;
        }

        /* === Arrow Targeting Mode (sorts/pièges) === */
        #gl-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
        }
        .my-hand .card.arrow-dragging,
        .my-hand .card.arena-style.arrow-dragging[class*="faction-"] {
            transform: translateY(-50px) scale(1.3) !important;
            z-index: 1000 !important;
            border: 2px solid #e67e22 !important;
            pointer-events: none;
            animation: none !important;
        }
        .my-hand .card.arrow-dragging::after,
        .my-hand .card.arena-style.arrow-dragging[class*="faction-"]::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            animation: arrowDragGlow 1.5s ease-in-out infinite;
        }
        @keyframes arrowDragGlow {
            0%, 100% { box-shadow: 0 0 6px rgba(230, 126, 34, 0.4); }
            50% { box-shadow: 0 0 16px rgba(230, 126, 34, 0.9); }
        }
        .card-cost { position: absolute; top: 3px; left: 3px; width: 22px; height: 22px; background: radial-gradient(circle at 30% 30%, #4fc3f7, #0277bd); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.85em; font-weight: bold; border: 2px solid #81d4fa; z-index: 5; }
        .card-cost.discounted { color: #4caf50; text-shadow: 0 0 6px #1b5e20, 0 0 10px rgba(76, 175, 80, 0.8); }
        .card-type-icon { position: absolute; top: 3px; right: 3px; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7em; z-index: 5; }
        .card-type-icon.spell-icon { background: rgba(155,89,182,0.9); border: 2px solid #bb8fce; }
        .card-type-icon.trap-icon { background: rgba(231,76,60,0.9); border: 2px solid #ec7063; }
        .card-art { width: 100%; height: 55px; display: flex; align-items: center; justify-content: center; font-size: 2em; }
        .card.creature .card-art { background: linear-gradient(180deg, #2a3a5a, #151d2e); }
        .card.spell .card-art { background: linear-gradient(180deg, #5a2a6a, #2d1535); }
        .card.trap-card .card-art { background: linear-gradient(180deg, #6a2a2a, #351515); }
        .card-body { background: #0a0a0a; padding: 3px; height: 61px; }
        .card-name { font-size: 0.5em; font-weight: bold; text-align: center; color: #ffd700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-abilities { display: flex; gap: 2px; justify-content: center; font-size: 0.7em; margin: 2px 0; }
        .card-stats { display: flex; justify-content: space-between; padding: 0 5px; margin-top: 2px; }
        .stat { font-size: 0.8em; font-weight: bold; padding: 2px 7px; border-radius: 3px; }
        .stat-atk { background: linear-gradient(135deg, #c0392b, #8e2222); }
        .stat-hp { background: linear-gradient(135deg, #2980b9, #1a5276); }
        .stat-hp.reduced { background: linear-gradient(135deg, #e67e22, #d35400); }
        .stat-atk.reduced { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .stat-atk.boosted, .stat-hp.boosted { color: #2ecc71; text-shadow: 0 0 5px rgba(46, 204, 113, 0.8); }
        .card.creature { border: 2px solid #3498db; }
        .card.spell { border: 2px solid #9b59b6; }
        .card.trap-card { border: 2px solid #e74c3c; }

        /* Cartes avec image de fond (nouveau système) */
        /* Template original: 636x934 pixels */
        .card.has-image {
            background-size: cover;
            background-position: center;
            border: none !important;
            overflow: visible;
        }
        .card.has-image .card-art,
        .card.has-image .card-body,
        .card.has-image .card-cost {
            display: none !important;
        }
        /* Coût mana - orbe bleu en haut à gauche (centre orbe ~7% du bord, ~4% du haut) */
        .card.has-image .img-cost {
            position: absolute;
            top: 4%;
            left: 7%;
            font-size: 0.85em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        .card.has-image .img-cost.discounted {
            color: #4caf50;
            text-shadow: 0 0 4px #000, 0 0 8px #1b5e20, 0 0 12px rgba(76, 175, 80, 0.8);
        }
        /* Sous-type - caché car pas de zone sur le template */
        .card.has-image .img-subtype {
            display: none;
        }
        /* Nom de la carte - bannière rouge (centre bannière ~50% du haut) */
        .card.has-image .img-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.48em;
            font-weight: bold;
            color: #fff;
            text-shadow: 1px 1px 2px #000, 0 0 4px #000;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
        }
        /* Type de créature - zone texte haut (~72% du haut) */
        .card.has-image .img-type-line {
            position: absolute;
            top: 72%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.28em;
            color: #bbb;
            text-shadow: 1px 1px 2px #000;
            white-space: nowrap;
            z-index: 10;
        }
        /* Capacités - zone texte milieu (~78% du haut) */
        .card.has-image .img-abilities {
            position: absolute;
            top: 78%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.32em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 1px 1px 2px #000, 0 0 4px #000;
            white-space: nowrap;
            z-index: 10;
        }
        /* ATK - gemme verte bas gauche (~93% du haut, ~15% du bord) */
        .card.has-image .img-atk {
            position: absolute;
            bottom: 4.5%;
            left: 15%;
            font-size: 0.75em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        /* HP - gemme rouge bas droite (~93% du haut, ~85% du bord gauche) */
        .card.has-image .img-hp {
            position: absolute;
            bottom: 4.5%;
            right: 15%;
            font-size: 0.75em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        .card.has-image .img-hp.reduced,
        .card.has-image .img-atk.reduced {
            color: #ff6b6b;
        }
        .card.has-image .img-atk.boosted,
        .card.has-image .img-hp.boosted {
            color: #2ecc71;
            text-shadow: 0 0 6px rgba(46, 204, 113, 0.8);
        }
        .card.has-image.just-played { border: 2px solid rgba(255,255,255,0.6) !important; }
        .card.has-image.can-attack { border: 2px solid #2ecc71 !important; box-shadow: 0 0 8px rgba(46,204,113,0.6); }

        /* === CARTES FULL ART === */
        .card.full-art {
            background-size: cover;
            background-position: center;
            border: 2px solid #555 !important;
            border-radius: 10px;
            overflow: visible;
        }
        .card.full-art .card-art,
        .card.full-art .card-body,
        .card.full-art .card-cost {
            display: none !important;
        }

        /* Titre en haut - fond vert */
        .card.full-art .fa-title {
            background: #184d26ba;
            border-radius: 7.5px 7.5px 0px 0px;
            padding: 2px 2px;
            text-align: center;
        }
        .card.full-art .fa-name {
            font-family: 'Merriweather Sans', sans-serif;
            font-size: 0.55em;
            color: #fff;
            -webkit-text-stroke: 1px #000;
            paint-order: stroke fill;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Zone de texte en bas - fond blanc transparent */
        .card.full-art .fa-text-zone {
            position: absolute;
            bottom: 22px;
            left: 4px;
            right: 4px;
            background: rgba(255,255,255,0.85);
            border-radius: 6px;
            padding: 5px 6px;
            text-align: left;
            backdrop-filter: blur(2px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        .card.full-art .fa-type {
            font-family: 'Quicksand', sans-serif;
            font-size: 0.35em;
            font-weight: 500;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
        }
        .card.full-art .fa-abilities {
            font-family: 'Quicksand', sans-serif;
            font-size: 0.4em;
            font-weight: 700;
            color: #b8860b;
            margin-top: 2px;
            text-align: left;
        }

        /* Version allégée sur le terrain */
        .card.full-art.on-field .fa-name-field {
            position: absolute;
            bottom: 18px;
            left: 4px;
            right: 4px;
            background: rgba(0,0,0,0.6);
            border-radius: 4px;
            padding: 2px 4px;
            text-align: center;
            font-family: 'Merriweather Sans', sans-serif;
            font-size: 0.45em;
            color: #fff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* MANA (image mana.png) - haut gauche */
        .card.full-art .fa-mana {
            position: absolute;
            top: -5px;
            left: -8px;
            width: 25px;
            height: 25px;
            background-image: url('/css/mana.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: 2px;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #fff;
            z-index: 10;
            -webkit-text-stroke: 1.5px #000;
            paint-order: stroke fill;
        }

        /* ATK (image épée) - bas gauche */
        .card.full-art .fa-atk {
            position: absolute;
            bottom: -6px;
            left: -7px;
            width: 27px;
            height: 27px;
            background-image: url('/css/Sword.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #fff;
            z-index: 10;
            -webkit-text-stroke: 1.5px #000;
            paint-order: stroke fill;
        }
        .card.full-art .fa-atk.boosted {
            color: #aaffaa;
        }
        .card.full-art .fa-atk.reduced {
            color: #ff6b6b;
        }

        /* HP (image coeur) - bas droite */
        .card.full-art .fa-hp {
            position: absolute;
            bottom: -7px;
            right: -4px;
            width: 26px;
            height: 26px;
            background-image: url('/css/Heart.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 900;
            color: #fff;
            z-index: 10;
            -webkit-text-stroke: 1.5px #000;
            paint-order: stroke fill;
        }
        .card.full-art .fa-hp.reduced {
            color: #ff6b6b;
            animation: pulse-damage 1s ease-in-out infinite;
        }
        .card.full-art .fa-hp.boosted {
            color: #aaffaa;
        }
        @keyframes pulse-damage {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* États de la carte */
        .card.full-art.just-played {
            box-shadow: 0 0 10px rgba(255,255,255,0.6);
        }
        .card.full-art.can-attack {
            box-shadow: 0 0 12px rgba(46,204,113,0.8);
            border-color: #2ecc71 !important;
        }

        /* ========== STYLE ARENA (Magic Arena) ========== */
        .card.arena-style {
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            border: 2px solid #333;
            position: relative;
            overflow: visible;
        }

        /* Titre en haut - fond vert par défaut */
        .card.arena-style .arena-title {
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            text-align: center;
        }
        .card.arena-style .arena-name {
            font-family: 'Bree Serif', serif;
            font-size: 0.44em;
            color: #e5e5e5;
            -webkit-text-stroke: 1px #2c241b;
            paint-order: stroke fill;
            letter-spacing: 0.2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Zone de texte au milieu */
        .card.arena-style .arena-text-zone {
            padding-left: 5px;
            padding-right: 5px;
            position: absolute;
            bottom: 14px;
            left: 2px;
            right: 2px;
            height: 45px;
            border-radius: 4px;
            text-align: left;
            overflow: visible;
        }
        .card.arena-style .arena-type {
            margin-top: 3px;
            font-family: 'Quicksand', sans-serif;
            font-size: 3.5px;
            font-weight: 500;
            color: #ffd700;
            text-align: center;
        }
        .card.arena-style .arena-abilities {
            font-family: 'Quicksand', sans-serif;
            font-size: 5px;
            font-weight: 600;
            color: #e5e5e5;
            margin-top: 1px;
            text-align: left;
        }
        .card.arena-style .arena-special {
            font-family: 'Quicksand', sans-serif;
            font-size: 5px;
            font-weight: 500;
            color: #d0d0d0;
            margin-top: 2px;
            line-height: 1.2;
            text-align: left;
        }

        /* Icône type de créature - en haut à droite sous le titre */
        .card.arena-style .arena-creature-type {
            position: absolute;
            top: 14%;
            right: 2px;
            z-index: 10;
            background: #e7d13cd6;
            border-radius: 50%;
            padding: 0.5px;
            line-height: 0;
        }
        .card.arena-style .arena-creature-type img {
            width: 10px;
            height: 10px;
            object-fit: contain;
            display: block;
        }

        /* ========== ICÔNE DE RARETÉ - DIAMANT STYLE MTG ========== */
        .card.arena-style .arena-edition {
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            width: 10px;
            height: 10px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card.arena-style .rarity-icon {
            width: 6px;
            height: 6px;
            position: relative;
            transform: rotate(45deg);
            border-radius: 1px;
        }

        .card.arena-style .rarity-icon .inner-shape {
            position: absolute;
            inset: 2px;
            border-radius: 0.5px;
        }

        /* COMMON - Noir */
        .card.arena-style .rarity-icon.common {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        }
        .card.arena-style .rarity-icon.common .inner-shape {
            background: #444;
        }

        /* UNCOMMON - Argenté */
        .card.arena-style .rarity-icon.uncommon {
            background: linear-gradient(135deg, #9a9a9a 0%, #6e6e6e 50%, #858585 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3),
                        inset 0 1px 4px rgba(200, 200, 200, 0.5),
                        inset 0 -1px 4px rgba(0, 0, 0, 0.3);
            animation: silverShimmer 3s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.uncommon .inner-shape {
            background: linear-gradient(135deg, #c0c0c0 0%, #888 100%);
        }

        /* RARE - Or */
        .card.arena-style .rarity-icon.rare {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #ffa500 50%, #ff8c00 75%, #ffd700 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 8px rgba(255, 215, 0, 0.6),
                        inset 0 1px 4px rgba(255, 255, 200, 0.8),
                        inset 0 -1px 4px rgba(204, 153, 0, 0.4);
            animation: rarityGoldPulse 2.5s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.rare .inner-shape {
            background: linear-gradient(135deg, #fffacd 0%, #ffb700 100%);
        }

        /* MYTHIC - Orange/Rouge flamboyant */
        .card.arena-style .rarity-icon.mythic {
            background: linear-gradient(135deg, #ff4500 0%, #ff6347 25%, #ff8c00 50%, #ffa500 75%, #ff4500 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3),
                        0 0 10px rgba(255, 100, 50, 0.7),
                        inset 0 1px 5px rgba(255, 200, 100, 0.8),
                        inset 0 -1px 5px rgba(180, 30, 0, 0.5);
            animation: rarityMythicFlame 2s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.mythic .inner-shape {
            background: linear-gradient(135deg, #ffeb3b 0%, #ff5722 100%);
        }

        /* PLATINUM - Blanc brillant */
        .card.arena-style .rarity-icon.platinum {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 25%, #e8e8e8 50%, #f5f5f5 75%, #ffffff 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15),
                        0 0 12px rgba(255, 255, 255, 0.8),
                        inset 0 1px 5px rgba(255, 255, 255, 1),
                        inset 0 -1px 4px rgba(200, 200, 200, 0.3);
            animation: rarityPlatinumShine 3s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.platinum .inner-shape {
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
        }

        @keyframes silverShimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.25); }
        }
        @keyframes rarityGoldPulse {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.25); }
        }
        @keyframes rarityMythicFlame {
            0%, 100% { filter: brightness(1) saturate(1.2); }
            50% { filter: brightness(1.3) saturate(1.5); }
        }
        @keyframes rarityPlatinumShine {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.15); }
        }

        /* Mana - Cercle métallique bleu style héros mana pool */
        .card.arena-style .arena-mana {
            position: absolute;
            top: 18px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: #83adef6b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 0.7em;
            font-weight: 900;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(123, 184, 232, 0.4), 0 2px 4px rgba(0, 0, 0, 0.8);
            border: none;
            z-index: 10;
            pointer-events: none;
        }
        .card.arena-style .arena-mana::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            padding: 1.4px;
            background: linear-gradient(135deg, #79c9ff 0%, #aad3f1 15%, #95cffd 30%, #5face7 50%, #6bafe4 70%, #93cbed 85%, #76b8eb 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5), 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        /* Mana réduit par Hyrule - chiffre vert */
        .card.arena-style .arena-mana.discounted {
            color: #4caf50;
            text-shadow: 0 0 6px #1b5e20, 0 0 10px rgba(76, 175, 80, 0.8);
        }

        /* Stats - Pilule style Magic Arena */
        .card.arena-style .arena-stats {
            position: absolute;
            bottom: -8px;
            right: -6px;
            border-radius: 8px;
            padding: 0px 6px;
            font-family: 'Cinzel', serif;
            font-size: 0.8em;
            font-weight: 900;
            color: #e5e5e5;
            z-index: 10;
            -webkit-text-stroke: 1px #000;
            paint-order: stroke fill;
        }
        /* Stats individuelles colorées */
        .card.arena-style .arena-atk.boosted,
        .card.arena-style .arena-hp.boosted {
            color: #7fff7f;
        }
        .card.arena-style .arena-atk.reduced,
        .card.arena-style .arena-hp.reduced {
            color: #ff6b6b;
        }

        /* Version terrain : pas de mana affiché */
        .card.arena-style.on-field .arena-mana {
            display: none;
        }

        /* États arena-style — bordures et glow gérés plus bas avec spécificité élevée */

        /* ========== STYLES PAR FACTION - Bordures métalliques dégradées ========== */
        /* Définition des dégradés par faction */
        .card.arena-style.faction-green { --faction-grad: linear-gradient(135deg, #2d5039 0%, #6b9b7a 15%, #427253 30%, #2a4536 50%, #427253 70%, #7aab8a 85%, #2d5039 100%); }
        .card.arena-style.faction-red { --faction-grad: linear-gradient(135deg, #8a2d32 0%, #d86a6f 15%, #ba3d43 30%, #7a2428 50%, #ba3d43 70%, #e87a7f 85%, #8a2d32 100%); }
        .card.arena-style.faction-black { --faction-grad: linear-gradient(135deg, #2a2a2a 0%, #6a6a6a 15%, #4a4a4a 30%, #1a1a1a 50%, #4a4a4a 70%, #7a7a7a 85%, #2a2a2a 100%); }
        .card.arena-style.faction-blue { --faction-grad: linear-gradient(135deg, #4673c9 0%, #8ab3ff 15%, #6493e9 30%, #3663b9 50%, #6493e9 70%, #9ac3ff 85%, #4673c9 100%); }
        .card.arena-style.faction-white { --faction-grad: linear-gradient(135deg, #c9c5b8 0%, #f5f3eb 15%, #e7e3d5 30%, #b8b4a7 50%, #e7e3d5 70%, #faf8f2 85%, #c9c5b8 100%); }
        .card.arena-style.faction-neutral { --faction-grad: linear-gradient(135deg, #4a3728 0%, #8b6b4a 15%, #6b4423 30%, #3d2a1a 50%, #6b4423 70%, #9b7b5a 85%, #4a3728 100%); }

        /* Bordure de carte - noir sombre 2px */
        .card.arena-style[class*="faction-"] {
            position: relative;
            border: 2px solid #1e1e1e !important;
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        /* Titre - pilule avec bordure dégradée transparente */
        .card.arena-style[class*="faction-"] .arena-title {
            background: #29573c6b;
            border-radius: 4px;
        }
        .card.arena-style[class*="faction-"] .arena-title::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--faction-grad);
            border-radius: 4px;
            padding: 1.4px;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            transform: translateZ(0);
        }
        .card.arena-style[class*="faction-"] .arena-name {
            padding: 2px 6px;
            position: relative;
            z-index: 1;
        }
        .card.arena-style.faction-red .arena-title {
            background: #e156477d;
        }
        .card.arena-style.faction-blue .arena-title {
            background: #323e826b;
        }
        .card.arena-style.faction-white .arena-title {
            background: #ffffff6b;
        }

        .card.arena-style.faction-black .arena-title {
            background: #0707076b;
            border-radius: 4px;
        }

        .card.arena-style.faction-neutral .arena-title {
            background: #573a296b;
            border-radius: 4px;
        }

        /* Zone de texte - pilule avec bordure dégradée transparente */
        .card.arena-style[class*="faction-"] .arena-text-zone {
            background: rgba(0, 0, 0, 0.6);
        }
        .card.arena-style[class*="faction-"] .arena-text-zone::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--faction-grad);
            border-radius: 4px;
            padding: 1.2px;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            transform: translateZ(0);
        }
        .card.arena-style[class*="faction-"] .arena-text-zone > * {
            position: relative;
            z-index: 1;
        }

        /* Stats - pilule avec bordure dégradée transparente */
        .card.arena-style[class*="faction-"] .arena-stats {
            background: rgba(0, 0, 0, 0.5) !important;
        }
        .card.arena-style.faction-green .arena-stats {
            background: #29573c6b !important;
            border: none !important;
        }
        .card.arena-style[class*="faction-"] .arena-stats::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--faction-grad);
            border-radius: 8px;
            padding: 1.2px;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            transform: translateZ(0);
        }
        .card.arena-style[class*="faction-"] .arena-atk,
        .card.arena-style[class*="faction-"] .arena-hp {
            position: relative;
            z-index: 1;
        }
        .card.arena-style.faction-red .arena-stats {
            background: rgb(189 66 66 / 50%) !important;
        }
        .card.arena-style.faction-blue .arena-stats {
            background: #323e826b !important;
        }

        /* Faction white - texte clair */
        .card.arena-style.faction-white .arena-name {
            color: #e5e5e5;
        }

        .card.arena-style.faction-white .arena-stats {
            background: #ffffff6b !important;
        }

        .card.arena-style.faction-black .arena-stats {
            background: #0707076b !important;
        }


        /* Code couleur des bordures — double classe pour écraser faction */
        .card.card.just-played, .card.arena-style.just-played[class*="faction-"] {
            border: 2px solid rgba(255,255,255,0.4) !important;
        }
        .card.card.can-attack, .card.arena-style.can-attack[class*="faction-"] {
            border: 2px solid #2ecc71 !important;
            box-shadow: 0 0 6px rgba(46,204,113,0.5);
            animation: canAttackGlow 2s ease-in-out infinite;
        }
        @keyframes canAttackGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(46,204,113,0.4); }
            50% { box-shadow: 0 0 12px rgba(46,204,113,0.8); }
        }
        .card.card.field-selected, .card.arena-style.field-selected[class*="faction-"] {
            box-shadow: 0 0 15px rgba(52,152,219,0.9);
            border-color: #3498db !important;
        }

        /* Cartes jouables en main (assez de mana) — bordure bleu électrique animée */
        .card.card.playable, .card.arena-style.playable[class*="faction-"] {
            border-color: #62d7ff !important;
            box-shadow: 0 0 6px rgba(98, 215, 255, 0.5);
            animation: playableGlow 2s ease-in-out infinite;
        }
        @keyframes playableGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(98, 215, 255, 0.4); border-color: #62d7ff; }
            50% { box-shadow: 0 0 14px rgba(98, 215, 255, 0.9); border-color: #90e4ff; }
        }

        /* Surbrillance orange quand un sort/piège cible une créature */
        .card.card.spell-hover-target, .card.arena-style.spell-hover-target[class*="faction-"] {
            border: 2px solid #f39c12 !important;
            box-shadow: 0 0 18px rgba(243,156,18,0.7), 0 0 6px rgba(243,156,18,0.4) inset !important;
            animation: none !important;
            transition: box-shadow 0.15s ease-out, border-color 0.15s ease-out;
        }


        /* ANIMATIONS */
        .card.attacking { animation: attackAnim 0.4s ease-out; }
        @keyframes attackAnim { 0% { transform: translateX(0); } 50% { transform: translateX(30px) scale(1.1); } 100% { transform: translateX(0); } }

        /* Animation de recul pour tireurs */
        .card.shooting { animation: shootRecoil 0.3s ease-out; }
        @keyframes shootRecoil { 0% { transform: translateX(0); } 30% { transform: translateX(-8px) scale(0.95); } 100% { transform: translateX(0); } }
        
        .card.taking-damage { animation: damageAnim 0.4s ease-out; }
        @keyframes damageAnim { 0%, 100% { filter: none; } 50% { filter: brightness(2) saturate(0); box-shadow: 0 0 20px red; } }
        
        .card.dying { animation: deathAnim 0.6s ease-out forwards; }
        @keyframes deathAnim { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(0) rotate(180deg); opacity: 0; } }
        
        /* Animation de pop pour invocation (overlay fixe) */
        .card.summon-overlay { 
            animation: summonPop 0.5s ease-out forwards; 
        }
        @keyframes summonPop { 
            0% { transform: scale(0); opacity: 0; } 
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; } 
        }
        
        /* Fondu de sortie pour l'overlay */
        .card.summon-overlay.fade-out {
            animation: none;
            opacity: 0;
            transition: opacity 0.15s ease-out;
        }
        
        .card.healing { animation: healAnim 0.5s ease-out; }
        @keyframes healAnim { 0%, 100% { box-shadow: none; } 50% { box-shadow: 0 0 30px rgba(46,204,113,0.9); } }
        
        /* Carte fantôme pour animation de déplacement */
        .card-moving {
            position: fixed;
            z-index: 3000;
            pointer-events: none;
            transition: left 0.5s ease-in-out, top 0.5s ease-in-out;
        }
        
        /* Carte affichée lors des sorts/pièges */
        .card-showcase { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%) scale(2); 
            z-index: 2000; 
            animation: showcaseAnim 1.5s ease-out forwards;
            pointer-events: none;
        }
        @keyframes showcaseAnim { 
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 
            20% { opacity: 1; transform: translate(-50%, -50%) scale(2.2); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } 
        }
        
        /* Vibration pour carte non jouable */
        .card.shake { animation: shakeAnim 0.4s ease-out; }
        @keyframes shakeAnim {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }
        
        /* Retour smooth dans la main */
        .card.returning { 
            transition: transform 0.3s ease-out, left 0.3s ease-out, top 0.3s ease-out;
        }
        
        .attack-projectile { position: fixed; z-index: 1000; font-size: 2em; pointer-events: none; transition: all 0.3s ease-out; }
        
        .spell-effect { position: fixed; z-index: 1000; font-size: 3em; pointer-events: none; animation: spellAnim 0.6s ease-out forwards; }
        @keyframes spellAnim { 0% { transform: scale(0); opacity: 1; } 50% { transform: scale(1.5); opacity: 1; } 100% { transform: scale(2); opacity: 0; } }
        
        .spell-miss {
            position: fixed;
            z-index: 1000;
            pointer-events: none;
            transform: translate(-50%, -50%);
            animation: missAnim 0.8s ease-out forwards;
        }
        .miss-cross {
            position: relative;
            width: 60px;
            height: 60px;
        }
        .miss-cross::before,
        .miss-cross::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 70px;
            height: 10px;
            background: linear-gradient(90deg, #ff0000, #cc0000);
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.8), 0 0 20px rgba(255, 0, 0, 0.5);
        }
        .miss-cross::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }
        .miss-cross::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }
        @keyframes missAnim {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            40% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
        }
        
        /* Les animations de dégâts sont maintenant gérées par PixiJS */
        /* Voir combat-animations.js pour les griffures et effets visuels */

        .damage-number { position: fixed; z-index: 1001; font-size: 1.8em; font-weight: bold; color: #e74c3c; text-shadow: 2px 2px 4px black; pointer-events: none; animation: damageFloat 1s ease-out forwards; }
        .damage-number.heal { color: #2ecc71; }
        @keyframes damageFloat { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-50px) scale(1.5); } }

        /* Animation de lévitation pour les créatures volantes */
        .card.flying-creature {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6), 0 0 20px rgba(135, 206, 250, 0.4);
            /* Décalage vers le haut pour montrer l'emplacement en dessous */
            position: relative;
            z-index: 10;
        }
        /* Bouclier Nid d'Abeilles (Protection) — overlay SVG */
        .card .shield-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 110%;
            height: 110%;
            transform: translate(-50%, -50%);
            z-index: 20;
            pointer-events: none;
            perspective: 800px;
            animation: shieldHover 3s infinite ease-in-out;
        }
        .shield-indicator .shield-3d {
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            animation: shieldTilt 6s infinite ease-in-out;
        }
        .shield-indicator .shield-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 4px rgba(0, 220, 255, 0.3));
        }
        @keyframes shieldHover {
            0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
            50% { transform: translate(-50%, -50%) translateY(-6px); }
        }
        @keyframes shieldTilt {
            0%, 100% { transform: rotateX(3deg) rotateY(0deg); }
            25% { transform: rotateX(1deg) rotateY(4deg); }
            50% { transform: rotateX(-2deg) rotateY(0deg); }
            75% { transform: rotateX(1deg) rotateY(-4deg); }
        }
        @keyframes shieldBreakFlash {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
            100% { opacity: 0; transform: scale(1.3); }
        }
        @keyframes shieldText {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0.8); }
            30% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 0; transform: translate(-50%, -80%) scale(1); }
        }
        @keyframes sparkle {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2) translateY(-20px); }
        }

        /* Death Transform: Petit Os -> Pile d'Os (tout en rAF, pas de keyframes) */

        /* Revive Transform: Pile d'Os -> Petit Os */
        @keyframes reviveParticleConverge {
            0% { opacity: 0.8; }
            80% { opacity: 0.6; }
            100% { opacity: 0; left: var(--target-x); top: var(--target-y); }
        }
        @keyframes reviveFlash {
            0% { opacity: 1; width: 0; height: 0; background: radial-gradient(circle, rgba(250, 204, 21, 0.95), transparent); transform: translate(-50%, -50%) scale(0); border-radius: 50%; }
            50% { opacity: 0.9; width: 80px; height: 80px; background: radial-gradient(circle, rgba(250, 204, 21, 0.8), transparent); transform: translate(-50%, -50%) scale(1); border-radius: 50%; }
            100% { opacity: 0; width: 120px; height: 120px; background: radial-gradient(circle, rgba(250, 204, 21, 0.3), transparent); transform: translate(-50%, -50%) scale(1.2); border-radius: 50%; }
        }
        @keyframes reviveParticleBurst {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(calc(-50% + var(--burst-x)), calc(-50% + var(--burst-y))) scale(0.3); }
        }
        @keyframes reviveTextAppear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            25% { opacity: 1; transform: translate(-50%, -50%) scale(1.15); }
            50% { opacity: 1; transform: translate(-50%, -53%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -75%) scale(0.95); }
        }

        /* Le slot avec un volant - pas de couleur spéciale */
        /* Ombre au sol pour les volants */
        .card-slot.has-flying::after {
            content: '';
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 15px;
            background: radial-gradient(ellipse, rgba(0, 0, 0, 0.5) 0%, transparent 70%);
            pointer-events: none;
            z-index: 5;
        }
        
        /* MAIN DU JOUEUR - 30% cachée (partie inférieure hors écran) */
        .my-hand { 
            position: absolute; 
            bottom: -35px; /* Cache 30% de la carte (116px * 0.3) */
            left: 140px; 
            display: flex; 
            padding: 10px 15px 0 15px;
            background: transparent; 
            max-width: calc(50% - 150px); 
            z-index: 20;
        }
        .my-hand .card {
            margin-left: -40px;
            transition: transform 0.2s ease-out, z-index 0s;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transform-origin: bottom center;
        }
        .my-hand .card:first-child { margin-left: 0; }
        .my-hand .card:hover:not(.dragging), .my-hand .card.dragging {
            transform: translateY(-50px) scale(1.3);
            z-index: 100 !important;
            animation: none !important;
        }
        .my-hand .card.playable:hover:not(.dragging) {
            border-color: #62d7ff !important;
            box-shadow: none !important;
        }
        .my-hand .card.playable:hover:not(.dragging)::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            animation: hoverGlow 1.5s ease-in-out infinite;
        }
        @keyframes hoverGlow {
            0%, 100% { box-shadow: 0 0 6px rgba(98, 215, 255, 0.4); }
            50% { box-shadow: 0 0 16px rgba(98, 215, 255, 0.9); }
        }
        .my-hand .card.selected { 
            transform: translateY(-55px) scale(1.35); 
            z-index: 101 !important; 
            box-shadow: 0 0 25px rgba(255,215,0,0.8); 
        }
        
        /* MAIN ADVERSE - 30% cachée */
        .opp-hand { 
            position: absolute; 
            bottom: -58px; /* 50% cachée */
            right: 140px; 
            display: flex; 
            padding: 10px 15px 0 15px;
            background: transparent;
            z-index: 20;
        }
        .opp-card-back {
            width: 86px;
            height: 116px;
            margin-left: -55px;
            border-radius: 6px;
            background: url('back1.png') center/cover no-repeat;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transition: transform 0.2s ease-out, z-index 0s;
        }
        .opp-card-back:first-child { margin-left: 0; }
        .opp-card-back:hover {
            transform: translateY(-50px);
        }
        
        /* Anciens styles log-popup supprimés - remplacés par les panneaux */
        .log-entry { padding: 4px 8px; margin: 3px 0; border-radius: 4px; }
        .log-phase { background: rgba(255,215,0,0.2); color: #ffd700; }
        .log-action { background: rgba(52,152,219,0.2); color: #5dade2; }
        .log-damage { background: rgba(231,76,60,0.2); color: #ec7063; }
        .log-heal { background: rgba(46,204,113,0.2); color: #58d68d; }
        .log-trap { background: rgba(155,89,182,0.2); color: #bb8fce; }
        
        /* Popup cimetière - style panneau bronze */
        .graveyard-popup {
            position: fixed;
            bottom: 130px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 500;
            display: none;
            max-width: 90vw;
        }
        .graveyard-popup.active { display: block; }

        .graveyard-border {
            border-radius: 20px;
            padding: 4px;
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.6),
                0 4px 16px rgba(0, 0, 0, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }

        .graveyard-inner {
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.95) 0%, rgba(10, 10, 10, 0.95) 50%, rgba(21, 21, 21, 0.95) 100%);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
            position: relative;
            overflow: hidden;
        }

        .graveyard-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 30%;
            background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }

        .graveyard-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(196, 184, 150, 0.2);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .graveyard-header .panel-close {
            flex-shrink: 0;
        }

        .graveyard-header .icon {
            width: 24px;
            height: 24px;
            fill: #c4b896;
        }

        .graveyard-title {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            font-weight: 700;
            color: #c4b896;
            letter-spacing: 2px;
            text-transform: uppercase;
            flex: 1;
        }

        .graveyard-cards {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 20px 25px;
            min-height: 140px;
        }
        .graveyard-cards::-webkit-scrollbar { height: 6px; }
        .graveyard-cards::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.3); border-radius: 3px; }
        .graveyard-cards::-webkit-scrollbar-thumb { background: rgba(196, 184, 150, 0.3); border-radius: 3px; }
        .graveyard-cards::-webkit-scrollbar-thumb:hover { background: rgba(196, 184, 150, 0.5); }
        .graveyard-cards .card { flex-shrink: 0; }
        .graveyard-cards .card .arena-stats { display: flex; }
        .graveyard-empty {
            color: rgba(196, 184, 150, 0.4);
            font-family: 'Cinzel', serif;
            font-style: italic;
            text-align: center;
            padding: 40px;
            width: 300px;
        }
        
        .game-over { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .game-over.hidden { display: none; }
        .game-over-box { text-align: center; padding: 40px; background: rgba(30,30,50,0.98); border-radius: 15px; border: 4px solid #ffd700; }
        .game-over-title { font-size: 2.5em; color: #ffd700; margin-bottom: 15px; }
        .game-over-result { font-size: 1.3em; margin-bottom: 25px; }
        .game-over-result.victory { color: #2ecc71; }
        .game-over-result.defeat { color: #e74c3c; }
        .game-over-result.draw { color: #f39c12; }
        
        /* Card hover preview flottante */
        .card-preview {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 10001;
            pointer-events: none;
            transform: scale(1.5);
            transform-origin: top right;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .card-preview.visible {
            opacity: 1;
        }
        
        /* Preview dos de carte */
        .card-back-preview {
            width: 100px;
            height: 135px;
            border-radius: 8px;
            background: url('back1.png') center/cover no-repeat;
        }
        
        /* Preview héros - wrapper pour une carte arena */
        .hero-preview {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 10001;
            pointer-events: none;
            transform: scale(1.5);
            transform-origin: top right;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .hero-preview.visible {
            opacity: 1;
        }
        .hero-preview-name {
            font-size: 14px;
            font-weight: bold;
            color: #ffd700;
            margin-top: 10px;
        }

        /* Cercle HP bronze pour les héros (preview/zoom arena uniquement) */
        .arena-hero-hp {
            position: absolute;
            top: 18px;
            right: 2px;
            z-index: 10;
        }
        .arena-hero-hp-border {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            padding: 1.6px;
            background: linear-gradient(135deg,
                #8b7355 0%,
                #d4c4a8 15%,
                #a08060 30%,
                #6b5344 50%,
                #8b7355 70%,
                #c4b896 85%,
                #8b7355 100%
            );
            box-shadow:
                0 2px 8px rgba(0, 0, 0, 0.5),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }
        .arena-hero-hp-inner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(10, 10, 10, 0.9) 50%, rgba(21, 21, 21, 0.9) 100%);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .arena-hero-hp-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 15%;
            height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
        }
        .arena-hero-hp-number {
            font-family: 'Cinzel', serif;
            font-size: 12px;
            font-weight: 900;
            color: #ffffff;
            text-shadow:
                0 0 10px rgba(196, 184, 150, 0.4),
                0 1px 3px rgba(0, 0, 0, 0.8);
            z-index: 2;
        }

        /* Ancien modal héros supprimé - utilise maintenant card-zoom-overlay avec template arena */

        /* Animation Zdejebel */
        .zdejebel-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transition: all 0.3s ease-out;
            z-index: 1000;
            pointer-events: none;
        }
        .zdejebel-effect.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.2);
        }
        .zdejebel-icon {
            font-size: 2.5em;
            animation: zdejebel-pulse 0.5s ease-in-out infinite;
        }
        .zdejebel-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.8);
        }
        @keyframes zdejebel-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); filter: brightness(1.3); }
        }

        /* Preview container avec capacités */
        .preview-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
        }
        .preview-container .preview-card {
            /* La carte garde sa taille normale, le scale est sur le container parent */
        }
        .preview-info-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .preview-abilities {
            display: flex;
            flex-direction: column;
            gap: 6px;
            max-width: 150px;
        }
        .preview-ability {
            background: rgba(0,0,0,0.85);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            padding: 8px 10px;
        }
        .ability-name {
            font-size: 0.7em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 4px;
        }
        .ability-name.type-ability {
            color: #ffffff;
        }
        .ability-desc {
            font-size: 0.55em;
            color: #ccc;
            line-height: 1.3;
        }

        /* Effets appliqués (sorts) */
        .preview-effects {
            display: flex;
            flex-direction: column;
            gap: 6px;
            max-width: 150px;
        }
        .preview-effect {
            background: rgba(0,0,0,0.85);
            border: 1px solid rgba(100,200,100,0.4);
            border-radius: 6px;
            padding: 8px 10px;
        }
        .effect-name {
            font-size: 0.7em;
            font-weight: bold;
            color: #7ed67e;
            margin-bottom: 4px;
        }
        .effect-desc {
            font-size: 0.55em;
            color: #ccc;
            line-height: 1.3;
        }
        
        /* Anciens styles settings-popup supprimés - remplacés par les panneaux */
        
        /* Zone de drop pour sorts globaux */
        .global-spell-zone {
            position: absolute;
            inset: 0;
            border: 4px dashed transparent;
            border-radius: 15px;
            pointer-events: none;
            transition: all 0.3s;
            z-index: 5;
        }
        .global-spell-zone.active {
            border-color: rgba(46, 204, 113, 0.8);
            background: rgba(46, 204, 113, 0.1);
            pointer-events: auto;
        }
        
        /* Highlight des sorts */
        .card-slot.spell-highlight {
            animation: spellFlash 1.5s ease-out;
        }
        @keyframes spellFlash {
            0% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.9); }
            100% { box-shadow: none; }
        }
        .card-slot.spell-highlight-damage {
            animation: spellFlashDamage 1.5s ease-out;
        }
        @keyframes spellFlashDamage {
            0% { box-shadow: 0 0 30px rgba(231, 76, 60, 0.9); }
            100% { box-shadow: none; }
        }
        /* Fallback flamme CSS pour sorts de zone (si PixiJS non dispo) */
        .spell-flame-effect {
            position: fixed;
            pointer-events: none;
            width: 60px;
            height: 80px;
            transform: translate(-50%, -50%);
            background: radial-gradient(ellipse at bottom, rgba(255, 100, 0, 0.9) 0%, rgba(255, 50, 0, 0.6) 40%, rgba(255, 200, 0, 0.3) 70%, transparent 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flameRise 0.8s ease-out forwards;
            z-index: 10000;
        }
        @keyframes flameRise {
            0% { opacity: 0; transform: translate(-50%, -50%) scaleY(0.3); }
            20% { opacity: 1; transform: translate(-50%, -60%) scaleY(1.2); }
            100% { opacity: 0; transform: translate(-50%, -80%) scaleY(0.5); }
        }

        .card-slot.spell-highlight-heal {
            animation: spellFlashHeal 1.5s ease-out;
        }
        @keyframes spellFlashHeal {
            0% { box-shadow: 0 0 30px rgba(46, 204, 113, 0.9); }
            100% { box-shadow: none; }
        }
        
        /* Bordure jaune sur les cartes ciblées par un sort */
        .card.spell-target-damage {
            border-color: #e74c3c !important;
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.8) !important;
            animation: cardTargetFlash 1.5s ease-out;
        }
        .card.spell-target-heal {
            border-color: #2ecc71 !important;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.8) !important;
            animation: cardTargetFlashHeal 1.5s ease-out;
        }
        @keyframes cardTargetFlash {
            0%, 50% { border-color: #e74c3c; box-shadow: 0 0 20px rgba(231, 76, 60, 0.9); }
            100% { border-color: transparent; box-shadow: none; }
        }
        @keyframes cardTargetFlashHeal {
            0%, 50% { border-color: #2ecc71; box-shadow: 0 0 20px rgba(46, 204, 113, 0.9); }
            100% { border-color: transparent; box-shadow: none; }
        }
        
        /* Bordure jaune sur les cartes pendant le drag-over */
        .card-slot.drag-over .card {
            border-color: #f1c40f !important;
            box-shadow: 0 0 15px rgba(241, 196, 15, 0.8) !important;
        }
        
        /* Buff animation */
        .buff-indicator {
            position: fixed;
            z-index: 1001;
            font-size: 1.4em;
            font-weight: bold;
            color: #f1c40f;
            text-shadow: 2px 2px 4px black;
            pointer-events: none;
            animation: buffFloat 1s ease-out forwards;
        }
        @keyframes buffFloat {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-40px) scale(1.3); }
        }
        
        /* Mulligan Overlay */
        .mulligan-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .mulligan-overlay.hidden { display: none; }
        .mulligan-title {
            font-size: 2em;
            color: #ffd700;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        .mulligan-subtitle {
            color: #aaa;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .mulligan-hand {
            display: flex;
            gap: 12px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90%;
        }
        .mulligan-hand .card {
            transform: scale(1.1);
            transition: transform 0.2s;
        }
        .mulligan-hand .card:hover {
            transform: scale(1.25) translateY(-10px);
        }
        .mulligan-buttons {
            display: flex;
            gap: 30px;
        }
        .mulligan-btn {
            padding: 18px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        .mulligan-btn.keep {
            background: linear-gradient(135deg, #27ae60, #1e8449);
            color: white;
        }
        .mulligan-btn.keep:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(39,174,96,0.6);
        }
        .mulligan-btn.reroll {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        .mulligan-btn.reroll:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(231,76,60,0.6);
        }
        .mulligan-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        .mulligan-waiting {
            color: #ffd700;
            font-size: 1.2em;
            margin-top: 20px;
            animation: pulse 1.5s infinite;
        }
        .mulligan-timer {
            position: absolute;
            top: 30px;
            right: 50px;
            font-size: 3em;
            font-weight: bold;
            color: #ffd700;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .mulligan-timer.visible {
            opacity: 1;
        }
        .mulligan-timer.urgent {
            color: #e74c3c;
            animation: timerPulse 0.5s infinite;
        }
        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ==================== MODE SELECTOR ==================== */
        .mode-selector-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .mode-selector-overlay.hidden { display: none; }
        .mode-selector-title {
            font-size: 2em;
            color: #ffd700;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
            font-family: 'Cinzel', serif;
        }
        .mode-selector-subtitle {
            color: #aaa;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        .mode-selector-buttons {
            display: flex;
            gap: 40px;
        }
        .mode-btn {
            background: rgba(20,20,40,0.95);
            border: 3px solid #8b7355;
            border-radius: 15px;
            padding: 40px 50px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            min-width: 220px;
            color: #ccc;
        }
        .mode-btn:hover {
            transform: scale(1.05);
            border-color: #ffd700;
            box-shadow: 0 0 30px rgba(255,215,0,0.3);
        }
        .mode-btn-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        .mode-btn-label {
            font-size: 1.4em;
            color: #ffd700;
            font-weight: bold;
            font-family: 'Cinzel', serif;
            margin-bottom: 8px;
        }
        .mode-btn-desc {
            color: #aaa;
            font-size: 0.95em;
        }
        .mode-normal .mode-btn-icon { color: #27ae60; }
        .mode-test .mode-btn-icon { color: #e67e22; }

        /* ==================== CARD PICKER ==================== */
        .card-picker-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.97);
            display: flex;
            flex-direction: column;
            z-index: 9999;
            overflow: hidden;
        }
        .card-picker-overlay.hidden { display: none; }
        .card-picker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px 10px;
            flex-shrink: 0;
        }
        .card-picker-title {
            font-size: 1.6em;
            color: #ffd700;
            font-family: 'Cinzel', serif;
            text-shadow: 0 0 15px rgba(255,215,0,0.4);
        }
        .card-picker-counter {
            font-size: 1.3em;
            color: #e67e22;
            font-weight: bold;
        }
        .card-picker-tabs {
            display: flex;
            gap: 10px;
            padding: 10px 30px;
            flex-shrink: 0;
        }
        .picker-tab {
            padding: 10px 25px;
            background: rgba(40,40,60,0.8);
            border: 2px solid #555;
            border-radius: 8px;
            color: #aaa;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.2s;
        }
        .picker-tab.active {
            background: rgba(60,60,100,0.9);
            border-color: #ffd700;
            color: #ffd700;
        }
        .picker-tab:hover:not(.active) {
            border-color: #888;
            color: #ddd;
        }
        .card-picker-grid {
            flex: 1;
            overflow-y: auto;
            padding: 15px 30px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 15px;
            align-content: start;
        }
        .picker-card-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .picker-card-wrapper .card {
            cursor: default !important;
            transform: none !important;
            margin: 0 !important;
        }
        .picker-card-wrapper .card:hover {
            transform: scale(1.05) !important;
        }
        .picker-add-btn {
            padding: 6px 20px;
            background: linear-gradient(135deg, #27ae60, #1e8449);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.85em;
            transition: all 0.2s;
        }
        .picker-add-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(39,174,96,0.5);
        }
        .picker-add-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .card-picker-selection {
            flex-shrink: 0;
            padding: 10px 30px;
            border-top: 2px solid rgba(255,215,0,0.3);
            background: rgba(10,10,20,0.9);
        }
        .card-picker-selection-label {
            color: #aaa;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        .card-picker-selection-row {
            display: flex;
            gap: 10px;
            min-height: 120px;
            align-items: center;
            overflow-x: auto;
        }
        .picker-selection-thumb {
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
            flex-shrink: 0;
        }
        .picker-selection-thumb .card {
            margin: 0 !important;
        }
        .picker-selection-thumb:hover {
            transform: scale(1.05);
        }
        .picker-selection-thumb:hover .picker-remove-badge {
            opacity: 1;
        }
        .picker-remove-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            width: 22px;
            height: 22px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1;
            pointer-events: none;
        }
        .card-picker-footer {
            flex-shrink: 0;
            padding: 15px 30px;
            text-align: center;
            background: rgba(10,10,20,0.9);
        }
        .picker-start-btn {
            padding: 16px 60px;
            font-size: 1.2em;
            font-weight: bold;
            font-family: 'Cinzel', serif;
            background: linear-gradient(135deg, #e67e22, #d35400);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .picker-start-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(230,126,34,0.6);
        }
        .picker-start-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        .picker-loading {
            grid-column: 1 / -1;
            text-align: center;
            color: #aaa;
            font-size: 1.3em;
            padding: 60px 0;
        }

        /* Animation onDeath - dégâts au héros à la mort d'une créature */
        .on-death-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: radial-gradient(circle, rgba(139, 0, 0, 0.9), rgba(50, 0, 0, 0.8));
            border: 2px solid #ff4444;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.6), inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        .on-death-effect.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            animation: deathPulse 0.8s ease-out;
        }
        .on-death-effect .death-source {
            font-size: 0.7em;
            color: #fff;
            text-shadow: 0 0 10px #ff0000;
            text-align: center;
            font-weight: bold;
        }
        @keyframes deathPulse {
            0% { transform: translate(-50%, -50%) scale(0.5); box-shadow: 0 0 10px rgba(255, 0, 0, 0.3); }
            50% { transform: translate(-50%, -50%) scale(1.2); box-shadow: 0 0 50px rgba(255, 0, 0, 0.8); }
            100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 30px rgba(255, 0, 0, 0.6); }
        }

        /* Impact au cimetière - animation de flash */
        .graveyard-impact {
            animation: graveyardImpactFlash 0.5s ease-out !important;
        }
        @keyframes graveyardImpactFlash {
            0% { filter: brightness(1); box-shadow: none; }
            15% { filter: brightness(2.5); box-shadow: 0 0 20px rgba(255, 215, 0, 0.9), 0 0 40px rgba(255, 170, 0, 0.5); }
            100% { filter: brightness(1); box-shadow: none; }
        }

        /* Particules de traînée vers le cimetière */
        .graveyard-trail-particle {
            position: fixed;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.9), rgba(255, 170, 0, 0.3));
            border-radius: 50%;
            pointer-events: none;
            z-index: 2002;
            transform: translate(-50%, -50%) scale(1);
            opacity: 0.8;
            transition: all 0.4s ease-out;
            box-shadow: 0 0 6px rgba(255, 215, 0, 0.6);
        }

        /* Animation de shake pour Petit Os */
        @keyframes boneShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }
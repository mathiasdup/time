/* ==================== CARTES ====================
   Styles de cartes, arena/fullart/image, main, animations cartes */

        .card {
            width: var(--card-w);
            height: var(--card-h);
            border-radius: 4px;
            position: relative;
            cursor: grab;
            overflow: hidden;
            transition: box-shadow 0.2s;
            background: linear-gradient(180deg, #2a2a3a 0%, #1a1a25 100%);
            flex-shrink: 0;
            border: 2px solid rgba(200,180,140,0.6);
            box-shadow: 0 4px 12px rgba(0,0,0,0.5), 0 2px 4px rgba(0,0,0,0.3);
            contain: layout style;
        }
        .card.dragging { cursor: grabbing; }

        /* === Custom Drag Ghost === */
        .drag-ghost-container {
            contain: layout style;
            will-change: transform;
        }
        .drag-ghost-container.lifting {
            transition: transform 180ms cubic-bezier(0.34, 1.2, 0.64, 1);
        }
        .drag-ghost-container.snapping {
            transition: transform 200ms cubic-bezier(0.2, 0, 0, 1),
                        opacity 150ms ease-out;
        }
        .drag-ghost-container.returning {
            transition: transform 250ms cubic-bezier(0.2, 0, 0, 1),
                        opacity 200ms ease-in;
        }
        .drag-ghost-card,
        .drag-ghost-card.card.arena-style[class*="faction-"] {
            border: 2px solid #252525 !important;
            border-radius: 4px !important;
            overflow: visible !important;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            width: 100% !important;
            height: 100% !important;
            margin: 0 !important;
            cursor: grabbing;
            transform: none !important;
        }
        .card.custom-dragging {
            visibility: hidden;
        }

        /* === Arrow Targeting Mode (sorts/piÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨ges) === */
        #gl-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
        }
        .my-hand .card.arrow-dragging,
        .my-hand .card.arena-style.arrow-dragging[class*="faction-"] {
            transform: translateY(-50px) scale(1) !important; /* zoom rend ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â  144px, scale(1) = natif */
            z-index: 1000 !important;
            border: 2px solid #252525 !important;
            pointer-events: none;
            overflow: visible;
        }

        /* Cartes avec image de fond (nouveau systÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨me) */
        /* Template original: 636x934 pixels */
        .card.has-image {
            background-size: cover;
            background-position: center;
            border: none !important;
            overflow: visible;
        }
        .card.has-image .card-art,
        .card.has-image .card-body,
        .card.has-image .card-cost {
            display: none !important;
        }
        /* CoÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â»t mana - orbe bleu en haut ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â  gauche (centre orbe ~7% du bord, ~4% du haut) */
        .card.has-image .img-cost {
            position: absolute;
            top: 4%;
            left: 7%;
            font-size: 0.85em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        .card.has-image .img-cost.discounted {
            color: #4caf50;
            text-shadow: 0 0 4px #000, 0 0 8px #1b5e20, 0 0 12px rgba(76, 175, 80, 0.8);
        }
        /* Sous-type - cachÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â© car pas de zone sur le template */
        .card.has-image .img-subtype {
            display: none;
        }
        /* Nom de la carte - banniÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨re rouge (centre banniÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨re ~50% du haut) */
        .card.has-image .img-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.48em;
            font-weight: bold;
            color: #fff;
            text-shadow: 1px 1px 2px #000, 0 0 4px #000;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
        }
        /* Type de crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature - zone texte haut (~72% du haut) */
        .card.has-image .img-type-line {
            position: absolute;
            top: 72%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.28em;
            color: #bbb;
            text-shadow: 1px 1px 2px #000;
            white-space: nowrap;
            z-index: 10;
        }
        /* CapacitÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©s - zone texte milieu (~78% du haut) */
        .card.has-image .img-abilities {
            position: absolute;
            top: 78%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.32em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 1px 1px 2px #000, 0 0 4px #000;
            white-space: nowrap;
            z-index: 10;
        }
        /* ATK - gemme verte bas gauche (~93% du haut, ~15% du bord) */
        .card.has-image .img-atk {
            position: absolute;
            bottom: 4.5%;
            left: 15%;
            font-size: 0.75em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        /* HP - gemme rouge bas droite (~93% du haut, ~85% du bord gauche) */
        .card.has-image .img-hp {
            position: absolute;
            bottom: 4.5%;
            right: 15%;
            font-size: 0.75em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
            z-index: 10;
        }
        .card.has-image .img-hp.reduced,
        .card.has-image .img-atk.reduced {
            color: #ff6b6b;
        }
        .card.has-image .img-atk.boosted,
        .card.has-image .img-hp.boosted {
            color: #2ecc71;
            font-weight: 900;
            text-shadow: 0 0 6px rgba(46, 204, 113, 0.8);
        }
        .card.has-image.just-played { border: 2px solid rgba(255,255,255,0.6) !important; }
        .card.has-image.can-attack { border: 2px solid #252525 !important; }


        /* ========== STYLE ARENA (Magic Arena) ========== */
        .card.arena-style {
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            border: 2px solid #333;
            position: relative;
            overflow: visible;
            will-change: transform;
            transform: translateZ(0);
        }

        /* Titre en haut - fond vert par dÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©faut */
        .card.arena-style .arena-title {
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            text-align: center;
            overflow: hidden;
        }
        .card.arena-style .arena-name {
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 0.6em;
            color: #e5e5e5;
            -webkit-text-stroke: 2px #353535;
            paint-order: stroke fill;
            letter-spacing: 0.2px;
            line-height: 10px;
            white-space: nowrap;
            overflow: hidden;
        }

        /* Zone de texte au milieu */
        .card.arena-style .arena-text-zone {
            padding-left: 3px;
            padding-right: 3px;
            position: absolute;
            bottom: 29px;
            left: 2px;
            right: 2px;
            height: 60px;
            border-radius: 4px;
            text-align: left;
            overflow: visible;
        }
        .card.arena-style.card-spell .arena-text-zone {
            bottom: 14px;
        }
        .card.arena-style .arena-type {
            margin-top: 3px;
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 4px;
            font-weight: 500;
            color: #ffd700;
            text-align: center;
        }
        .card.arena-style .arena-abilities {
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 6px;
            font-weight: 600;
            color: #e5e5e5;
            margin-top: 2px;
            text-align: left;
        }
        .card.arena-style .arena-special {
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 6px;
            font-weight: 500;
            color: #d0d0d0;
            margin-top: 2px;
            line-height: 1.2;
            text-align: left;
        }

        /* IcÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â´ne type de crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature - en haut ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â  droite sous le titre */
        .card.arena-style .arena-creature-type {
            position: absolute;
            top: 14%;
            right: 2px;
            z-index: 10;
            background: #e7d13cd6;
            border-radius: 50%;
            padding: 0.5px;
            line-height: 0;
        }
        .card.arena-style .arena-creature-type img {
            width: 10px;
            height: 10px;
            object-fit: contain;
            display: block;
        }

        /* ========== ICÃƒÆ’Ã†â€™ÃƒÂ¢Ã¢â€šÂ¬Ã‚ÂNE DE RARETÃƒÆ’Ã†â€™ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â° - DIAMANT STYLE MTG ========== */
        .card.arena-style .arena-edition {
            position: absolute;
            bottom: 2px;
            left: 0;
            right: 0;
            margin: 0 auto;
            z-index: 10;
            width: 9px;
            height: 9px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card.arena-style .rarity-icon {
            width: 6px;
            height: 6px;
            position: relative;
            transform: rotate(45deg);
            border-radius: 1px;
        }

        .card.arena-style .rarity-icon .inner-shape {
            position: absolute;
            inset: 2px;
            border-radius: 0.5px;
        }

        /* COMMON - Noir */
        .card.arena-style .rarity-icon.common {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        }
        .card.arena-style .rarity-icon.common .inner-shape {
            background: #444;
        }

        /* UNCOMMON - ArgentÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â© */
        .card.arena-style .rarity-icon.uncommon {
            background: linear-gradient(135deg, #9a9a9a 0%, #6e6e6e 50%, #858585 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3),
                        inset 0 1px 4px rgba(200, 200, 200, 0.5),
                        inset 0 -1px 4px rgba(0, 0, 0, 0.3);
            animation: silverShimmer 3s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.uncommon .inner-shape {
            background: linear-gradient(135deg, #c0c0c0 0%, #888 100%);
        }

        /* RARE - Or */
        .card.arena-style .rarity-icon.rare {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #ffa500 50%, #ff8c00 75%, #ffd700 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 8px rgba(255, 215, 0, 0.6),
                        inset 0 1px 4px rgba(255, 255, 200, 0.8),
                        inset 0 -1px 4px rgba(204, 153, 0, 0.4);
            animation: rarityGoldPulse 2.5s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.rare .inner-shape {
            background: linear-gradient(135deg, #fffacd 0%, #ffb700 100%);
        }

        /* MYTHIC - Orange/Rouge flamboyant */
        .card.arena-style .rarity-icon.mythic {
            background: linear-gradient(135deg, #ff4500 0%, #ff6347 25%, #ff8c00 50%, #ffa500 75%, #ff4500 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3),
                        0 0 10px rgba(255, 100, 50, 0.7),
                        inset 0 1px 5px rgba(255, 200, 100, 0.8),
                        inset 0 -1px 5px rgba(180, 30, 0, 0.5);
            animation: rarityMythicFlame 2s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.mythic .inner-shape {
            background: linear-gradient(135deg, #ffeb3b 0%, #ff5722 100%);
        }

        /* PLATINUM - Blanc brillant */
        .card.arena-style .rarity-icon.platinum {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 25%, #e8e8e8 50%, #f5f5f5 75%, #ffffff 100%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15),
                        0 0 12px rgba(255, 255, 255, 0.8),
                        inset 0 1px 5px rgba(255, 255, 255, 1),
                        inset 0 -1px 4px rgba(200, 200, 200, 0.3);
            animation: rarityPlatinumShine 3s ease-in-out infinite;
        }
        .card.arena-style .rarity-icon.platinum .inner-shape {
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
        }

        @keyframes silverShimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        @keyframes rarityGoldPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        @keyframes rarityMythicFlame {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.75; }
        }
        @keyframes rarityPlatinumShine {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.85; }
        }

        /* Mana - Cercle métallique bleu style héros mana pool */
        .card.arena-style .arena-mana {
            position: absolute;
            top: 20px;
            left: 2px;
            width: 25px;
            height: 25px;
            background: #d1d1d1;
            background-clip: padding-box;
            border: 2px solid #d1d1d185;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 19px;
            font-weight: 900;
            color: #292929;
            z-index: 10;
            pointer-events: none;
        }
        /* Mana rÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©duit par Hyrule - chiffre vert */
        .card.arena-style .arena-mana.discounted {
            color: #4caf50;
            text-shadow: 0 0 6px #1b5e20, 0 0 10px rgba(76, 175, 80, 0.8);
        }

        /* Stats - Pilule style Magic Arena */
.card.arena-style .arena-stats {
            position: absolute;
            bottom: 2px;
            height: 12%;
            right: -6px;
            border-radius: 12px;
            padding: 0px 6px 0px 6px;
            font-family: 'Glacial Indifference', sans-serif;
            font-size: 0.8em;
            font-weight: 900;
            color: #e5e5e5;
            z-index: 10;
            text-shadow: 0 0 15px rgba(0 0 0 / 10%), 0 0px 2px rgba(0, 0, 0, 0.8);
            text-align: center;
        }
        /* Stats individuelles colorÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©es */
        .card.arena-style .arena-atk.boosted,
        .card.arena-style .arena-hp.boosted,
        .card.arena-style .arena-special .boosted,
        .card.arena-style .arena-abilities .boosted {
            color: #7fff7f;
            font-weight: 900;
        }
        .card.arena-style .arena-atk.reduced,
        .card.arena-style .arena-hp.reduced {
            color: #ff6b6b;
        }

        /* Version terrain : pas de mana affichÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â© */
        .card.arena-style.on-field:not(.in-graveyard) .arena-title {
            display: none;
        }
        .card.arena-style.on-field .arena-mana {
            display: none;
        }
        .card.arena-style.on-field .arena-stats {
            min-width: 40px;
            height: 22px;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
        }
        /* BÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¢timents : repositionner le conteneur stats */
        .card.arena-style.card-building .arena-stats {
        }
        .card-slot .card.arena-style.on-field.card-building .arena-stats,
        .drag-ghost-card.arena-style.card-building .arena-stats {
        }
        /* Style de l'armor (HP bÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¢timent) */
        .card.arena-style .arena-stats .arena-armor {
            background: linear-gradient(135deg, #b8bec2, #a3aaae, #8a9298);
            background-clip: padding-box;
            border: 2px solid #b8bec294;
            border-radius: 10px 2px 10px 2px;
            color: #fff;
            width: 40px;
            height: 25px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .card-slot .card.arena-style.on-field .arena-stats .arena-armor,
        .drag-ghost-card.arena-style .arena-stats .arena-armor {
            width: 40px;
            height: 25px;
            font-size: 20px;
            border-width: 2px;
        }
        /* Ghost hors #game-scaler: adapter les stats au zoom global ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©cran */
        .drag-ghost-card.arena-style .arena-stats .arena-armor {
            width: calc(40px * var(--game-scale, 1));
            height: calc(25px * var(--game-scale, 1));
            font-size: calc(20px * var(--game-scale, 1));
            border-width: calc(2px * var(--game-scale, 1));
        }

        /* ÃƒÆ’Ã†â€™ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â°tats arena-style ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â bordures et glow gÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©rÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©s plus bas avec spÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©cificitÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â© ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©levÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e */

        /* ========== STYLES PAR FACTION - Bordures mono-couleur ========== */
        .card.arena-style.faction-green { --faction-border: #4a7a5a; }
        .card.arena-style.faction-red { --faction-border: #a04048; }
        .card.arena-style.faction-black { --faction-border: #5a5a5a; }
        .card.arena-style.faction-blue { --faction-border: #6a93d9; }
        .card.arena-style.faction-white { --faction-border: #d5d0c5; }
        .card.arena-style.faction-neutral { --faction-border: #6b5535; }

        /* Bordure de carte - noir sombre 2px */
        .card.arena-style[class*="faction-"] {
            position: relative;
            border: 2px solid #353535 !important;
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        /* Titre - bordure mono-couleur */
        .card.arena-style[class*="faction-"] .arena-title {
            background: #323e82c4;
            border: 2px solid var(--faction-border);
            border-radius: 4px;
        }
        .card.arena-style[class*="faction-"] .arena-name {
            padding: 1px 6px 2px 6px;
        }
        .card.arena-style.faction-red .arena-title { background: rgb(189 66 66 / 50%); }
        .card.arena-style.faction-blue .arena-title { background: #323e828a; }
        .card.arena-style.faction-white .arena-title { background: #ffffff91; }
        .card.arena-style.faction-green .arena-title { background: #29573c94; }
        .card.arena-style.faction-black .arena-title { background: #2a2a2acc; }
        .card.arena-style.faction-neutral .arena-title { background: #573a29b5; }

        /* Zone de texte - bordure mono-couleur */
        .card.arena-style[class*="faction-"] .arena-text-zone {
            background: rgba(0, 0, 0, 0.72);
            border: 2px solid var(--faction-border);
        }
        .card.arena-style.faction-black .arena-text-zone { background: rgba(20, 20, 20, 0.8); }

        /* Stats - bordure mono-couleur */
        .card.arena-style[class*="faction-"] .arena-stats {
            background: rgba(0, 0, 0, 0.5) !important;
            border: 2px solid var(--faction-border);
        }
        /* Ronds sÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©parÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©s ATK / HP ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â toutes factions */
        .card.arena-style[class*="faction-"] .arena-stats {
            left: 2px;
            right: 2px;
            background: none !important;
            border: none !important;
            border-radius: 0 !important;
            padding: 0;
            display: flex;
            justify-content: space-between;
            font-size: 0;
            height: auto;
            min-width: auto;
        }
        .card.arena-style[class*="faction-"] .arena-stats .arena-atk,
        .card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            width: 40px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 900;
            color: #e5e5e5;
        }
        .card.arena-style[class*="faction-"] .arena-stats .arena-atk {
            background: linear-gradient(to bottom right, #fbbf24, #f59e0b, #d97706);
            background-clip: padding-box;
            border: 2px solid #ff6b2196;
            border-radius: 2px 10px 2px 10px;
        }
        .card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            background: linear-gradient(to bottom right, #f472b6, #e11d48, #be123c);
            background-clip: padding-box;
            border: 2px solid #ff440180;
            border-radius: 10px 2px 10px 2px;
        }
        /* BÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¢timents ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â stats uniquement ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â  droite (pas de left) */
        .card.arena-style.card-building[class*="faction-"] .arena-stats {
            left: auto;
        }
        /* Board & drag ghost ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â ronds plus grands */
        .card-slot .card.arena-style.on-field[class*="faction-"] .arena-stats .arena-atk,
        .card-slot .card.arena-style.on-field[class*="faction-"] .arena-stats .arena-hp,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-atk,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            width: 40px;
            height: 25px;
            font-size: 20px;
        }
        /* Ghost hors #game-scaler: adapter ATK/HP au zoom global ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©cran */
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-atk,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            width: calc(40px * var(--game-scale, 1));
            height: calc(25px * var(--game-scale, 1));
            font-size: calc(20px * var(--game-scale, 1));
            border-width: calc(2px * var(--game-scale, 1));
        }
        /* Summon animation overlays are rendered outside #game-scaler. */
        .summon-anim-card.arena-style .arena-stats .arena-armor {
            width: calc(40px * var(--game-scale, 1));
            height: calc(25px * var(--game-scale, 1));
            font-size: calc(20px * var(--game-scale, 1));
            border-width: calc(2px * var(--game-scale, 1));
        }
        .summon-anim-card.arena-style[class*="faction-"] .arena-stats .arena-atk,
        .summon-anim-card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            width: calc(40px * var(--game-scale, 1));
            height: calc(25px * var(--game-scale, 1));
            font-size: calc(20px * var(--game-scale, 1));
            border-width: calc(2px * var(--game-scale, 1));
        }
        .card-slot .card.arena-style.on-field[class*="faction-"] .arena-stats .arena-atk,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-atk {
            background: linear-gradient(to bottom right, #fbbf24, #f59e0b, #d97706);
            background-clip: padding-box;
            border: 2px solid #ff6b2196;
        }
        .card-slot .card.arena-style.on-field[class*="faction-"] .arena-stats .arena-hp,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            background: linear-gradient(to bottom right, #f472b6, #e11d48, #be123c);
            background-clip: padding-box;
            border: 2px solid #ff440180;
        }
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-atk,
        .drag-ghost-card.arena-style[class*="faction-"] .arena-stats .arena-hp {
            border-width: calc(2px * var(--game-scale, 1));
        }
        /* Boosted/reduced ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â spÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©cificitÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â© suffisante pour ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©craser la couleur par dÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©faut */
        .card.arena-style[class*="faction-"] .arena-stats .arena-atk.boosted,
        .card.arena-style[class*="faction-"] .arena-stats .arena-hp.boosted {
            color: #7fff7f;
        }
        .card.arena-style[class*="faction-"] .arena-stats .arena-atk.reduced,
        .card.arena-style[class*="faction-"] .arena-stats .arena-hp.reduced {
            color: #ff6b6b;
        }

        /* Faction white - texte clair */
        .card.arena-style.faction-white .arena-name { color: #e5e5e5; }

        /* Cartes crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©atures sur le board ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â nom plus grand */
        .card-slot .card.arena-style .arena-name {
            font-size: 0.8em;
        }
        .card-slot .card.arena-style[class*="faction-"] .arena-name {
            padding: 4px 6px 5px 6px;
        }
        .card-slot .card.arena-style.on-field .arena-stats {
        }

        /* Code couleur des bordures ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â double classe pour ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©craser faction */
        .card.card.just-played, .card.arena-style.just-played[class*="faction-"] {
            border: 2px solid rgba(255,255,255,0.4) !important;
        }
        .card.card.can-attack, .card.arena-style.can-attack[class*="faction-"] {
            overflow: visible;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
        }
        .card.card.field-selected, .card.arena-style.field-selected[class*="faction-"] {
            border-color: #3498db !important;
        }

        /* Cartes jouables en main ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â bordure normale, le glow Canvas est derriÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨re */
        .card.card.playable, .card.arena-style.playable[class*="faction-"] {
            border-color: #353535 !important;
            overflow: visible;
        }

        /* Surbrillance orange quand un sort/piÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨ge cible une crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature */
        .card.card.spell-hover-target, .card.arena-style.spell-hover-target[class*="faction-"] {
            border: 2px solid transparent !important;
            overflow: visible;
        }


        /* === Animated gradient borders (conic-gradient rotatif dans un ::after masquÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©) === */
        @property --border-angle {
            syntax: '<angle>';
            initial-value: 0deg;
            inherits: false;
        }
        @keyframes rotateBorder {
            to { --border-angle: 360deg; }
        }

        /* Slots ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â bordures mono-couleur (comme les trap-slots) */
        .card-slot.valid-target {
            border-color: transparent !important;
            background: transparent !important;
        }
        .card-slot.cross-target,
        .card-slot.drag-over {
            border-color: transparent !important;
            background: transparent !important;
        }

        /* HÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ros ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â bordures mono-couleur */
        .hero-card.hero-targetable {
            border-color: #62d7ff !important;
            background: rgba(98,215,255,0.15) !important;
        }
        .hero-card.hero-drag-over {
            border-color: #f1c40f !important;
            background: rgba(241,196,15,0.2) !important;
        }

        /* Bleu = crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature ciblable par un sort (avant hover) */
        .card.card.spell-targetable, .card.arena-style.spell-targetable[class*="faction-"] {
            border-color: #62d7ff !important;
        }
        /* Orange mono-couleur = spell hover sur crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature */
        .card.card.spell-hover-target, .card.arena-style.spell-hover-target[class*="faction-"] {
            border-color: #f39c12 !important;
            box-shadow: 0 0 8px rgba(243, 156, 18, 0.5);
        }

        /* Pre-signal piege : on coupe les glows terrain, seules les cibles gardent le glow orange existant. */
        #battlefield.trap-warning-mode .card-slot .card:not(.spell-hover-target) .card-glow-canvas {
            opacity: 0 !important;
        }
        #battlefield.trap-warning-mode .card-slot .card:not(.spell-hover-target) {
            box-shadow: none !important;
        }

        /* Ghost card : pas de ::after gradient, le glow orange remplace */

        /* ANIMATIONS */
        .card.attacking { animation: attackAnim 0.4s ease-out; }
        @keyframes attackAnim { 0% { transform: translateX(0); } 50% { transform: translateX(30px) scale(1.1); } 100% { transform: translateX(0); } }

        /* Animation de recul pour tireurs */
        .card.shooting { animation: shootRecoil 0.3s ease-out; }
        @keyframes shootRecoil { 0% { transform: translateX(0); } 30% { transform: translateX(-8px) scale(0.95); } 100% { transform: translateX(0); } }
        
        
        .card.dying { animation: deathAnim 0.6s ease-out forwards; }
        @keyframes deathAnim { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(0) rotate(180deg); opacity: 0; } }
        
        /* Animation de pop pour invocation (overlay fixe) */
        .card.summon-overlay { 
            animation: summonPop 0.5s ease-out forwards; 
        }
        @keyframes summonPop { 
            0% { transform: scale(0); opacity: 0; } 
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; } 
        }
        
        /* Fondu de sortie pour l'overlay */
        .card.summon-overlay.fade-out {
            animation: none;
            opacity: 0;
            transition: opacity 0.15s ease-out;
        }
        
        
        /* Carte fantÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â´me pour animation de dÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©placement */
        .card-moving {
            position: fixed;
            z-index: 3000;
            pointer-events: none;
            transition: left 0.5s ease-in-out, top 0.5s ease-in-out;
        }
        
        /* Carte affichÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e lors des sorts/piÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨ges */
        .card-showcase { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%) scale(2); 
            z-index: 2000; 
            animation: showcaseAnim 1.5s ease-out forwards;
            pointer-events: none;
        }
        @keyframes showcaseAnim { 
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 
            20% { opacity: 1; transform: translate(-50%, -50%) scale(2.2); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } 
        }
        
        /* Vibration pour carte non jouable */
        .card.shake { animation: shakeAnim 0.4s ease-out; }
        @keyframes shakeAnim {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }
        
        /* Retour smooth dans la main */
        .card.returning { 
            transition: transform 0.3s ease-out, left 0.3s ease-out, top 0.3s ease-out;
        }
        
        .attack-projectile { position: fixed; z-index: 1000; font-size: 2em; pointer-events: none; transition: transform 0.3s ease-out, left 0.3s ease-out, top 0.3s ease-out; }
        
        
        /* Les animations de dÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©gÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¢ts sont maintenant gÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©rÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©es par PixiJS */
        /* Voir combat-animations.js pour les griffures et effets visuels */


        /* Animation de lÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©vitation pour les crÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©atures volantes */
        .card.on-field {
            box-shadow: none;
        }
        .card.flying-creature {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
            /* DÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©calage vers le haut pour montrer l'emplacement en dessous */
            position: relative;
            z-index: 10;
            /* GPU compositing : la carte + stats bougent comme une seule texture, ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©limine le tremblement */
            will-change: transform;
            backface-visibility: hidden;
        }

        /* Death Transform: Petit Os -> Pile d'Os (tout en rAF, pas de keyframes) */


        /* Le slot avec un volant - pas de couleur spÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ciale */
        
        /* MAIN DU JOUEUR - 30% cachÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e (partie infÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©rieure hors ÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©cran) */
        .my-hand {
            position: absolute;
            bottom: -30px; /* Cache ~20% de la carte */
            left: 35px;
            display: flex;
            padding: 10px 15px 0 15px;
            background: transparent;
            max-width: calc(50% - 150px);
            z-index: 20;
        }
        .my-hand .card {
            margin-left: -56px;
            transition: transform 0.2s ease-out, z-index 0s;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transform-origin: bottom center;
        }
        /* Mode host Pixi: la logique reste DOM, le visuel est dessiné en overlay Pixi */
        .my-hand .card.pixi-hand-host.pixi-hand-ready {
            background: transparent !important;
            background-image: none !important;
            border-color: transparent !important;
            box-shadow: none !important;
        }
        .my-hand .card.pixi-hand-host.pixi-hand-ready > * {
            visibility: hidden !important;
        }
        /* Board host Pixi: garder les marqueurs DOM, masquer le rendu carte DOM */
        .card-slot .card.pixi-board-host.pixi-board-ready {
            background: transparent !important;
            background-image: none !important;
            border-color: transparent !important;
            box-shadow: none !important;
        }
        .card-slot .card.pixi-board-host.pixi-board-ready > :not(.gaze-marker):not(.poison-marker):not(.entrave-marker):not(.buff-marker):not(.card-glow-canvas) {
            visibility: hidden !important;
        }
        .my-hand .card:first-child { margin-left: 0; }
        .my-hand .card:hover:not(.dragging), .my-hand .card.dragging {
            transform: translateY(-50px);
            z-index: 100 !important;
            animation: none !important;
        }
        .my-hand .card.playable:hover:not(.dragging) {
            border-color: #353535 !important;
        }
        .my-hand .card.selected {
            transform: translateY(-55px) scale(1.15);
            z-index: 101 !important;
        }
        
        /* MAIN ADVERSE - 30% cachÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e */
        .opp-hand {
            position: absolute;
            bottom: -60px; /* 50% cachÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e */
            right: 35px;
            display: flex;
            padding: 10px 15px 0 15px;
            background: transparent;
            z-index: 20;
        }
        .opp-card-back {
            width: var(--card-w);
            height: var(--card-h);
            margin-left: -56px;
            border-radius: 4px;
            background: url('../cardback/back_1.png') center/cover no-repeat;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transition: transform 0.2s ease-out, z-index 0s;
            contain: layout style paint;
        }
        .opp-card-back:first-child { margin-left: 0; }
        .opp-card-back:hover {
            transform: translateY(-50px);
        }
        .opp-card-back.opp-revealed {
            background-image: none;
            background-size: cover;
            background-position: center;
            width: var(--card-w);
            height: var(--card-h);
            cursor: pointer;
        }

        /* ========== MELODY LOCK & PETRIFICATION ========== */

        /* CrÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature bloquÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e par MÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©lodie ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â terni par-dessus tout sauf stats */
        .card.melody-locked {
            position: relative;
            isolation: isolate;
        }
        .card.melody-locked::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: #909090;
            mix-blend-mode: saturation;
            opacity: 0.6;
            z-index: 14;
            border-radius: 8px;
            pointer-events: none;
        }
        .card.melody-locked .arena-stats {
            z-index: 15 !important;
        }

        /* CrÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©ature pÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©trifiÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©e ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â N&B complet sauf stats */
        .card.petrified {
            position: relative;
            isolation: isolate;
        }
        /* Couche de dÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©saturation via mix-blend-mode */
        .card.petrified::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: #707070;
            mix-blend-mode: saturation;
            opacity: 1;
            z-index: 14;
            border-radius: 8px;
            pointer-events: none;
        }
        /* Stats restent colorÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©es au-dessus du N&B */
        .card.petrified .arena-stats {
            z-index: 15 !important;
        }

        /* Jeton compteur de gaze (Medusa) ÃƒÆ’Ã‚Â¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬ÃƒÂ¢Ã¢â€šÂ¬Ã‚Â bordure gradient violet rotatif */
        .gaze-marker {
            position: absolute;
            top: 2px;
            right: 6px;
            width: 24px;
            height: 24px;
            background: #6b21a8;
            border: 2px solid #D0BBA0;
            border-radius: 50%;
            color: #e5e5e5;
            font-size: 1em;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .poison-marker {
            position: absolute;
            top: 2px;
            right: 6px;
            width: 24px;
            height: 24px;
            background: #479805;
            border: 2px solid #D0BBA0;
            border-radius: 50%;
            color: #e5e5e5;
            font-size: 1em;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .entrave-marker {
            position: absolute;
            top: 2px;
            right: 6px;
            width: 24px;
            height: 24px;
            background: #1a1a1a;
            border: 2px solid #D0BBA0;
            border-radius: 50%;
            color: #e5e5e5;
            font-size: 1em;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .buff-marker {
            position: absolute;
            top: 2px;
            right: 6px;
            width: 24px;
            height: 24px;
            background: #68391c;
            border: 2px solid #4a2814;
            border-radius: 50%;
            color: #e5e5e5;
            font-size: 1em;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        /* Cacher titre, stats et markers sur les cartes au cimetiÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â¨re (pile uniquement, pas la popup) */
        .grave-card-layer .card.in-graveyard .arena-title,
        .grave-card-layer .card.in-graveyard .arena-stats,
        .grave-card-layer .card.in-graveyard .arena-mana,
        .grave-top-card .card.in-graveyard .arena-title,
        .grave-top-card .card.in-graveyard .arena-stats,
        .grave-top-card .card.in-graveyard .arena-mana {
            display: none !important;
        }
        .card.in-graveyard .gaze-marker,
        .card.in-graveyard .poison-marker,
        .card.in-graveyard .entrave-marker,
        .card.in-graveyard .buff-marker {
            display: none;
        }

        /* Animation pop d'apparition des marqueurs */
        @keyframes markerPop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.35); opacity: 1; }
            70% { transform: scale(0.9); }
            85% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        .marker-pop {
            animation: markerPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* Flash du compteur quand il s'incrÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â©mente */
        @keyframes markerCountBump {
            0% { transform: scale(1); }
            30% { transform: scale(1.4); color: #fff; }
            100% { transform: scale(1); }
        }
        .marker-bump {
            animation: markerCountBump 0.3s ease-out;
        }



